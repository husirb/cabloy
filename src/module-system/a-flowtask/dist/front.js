(()=>{var t={971:(t,e,n)=>{"use strict";n.d(e,{Z:()=>P});var a=n(5),o=n.n(a);function r(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function s(t){r(i,a,o,s,l,"next",t)}function l(t){r(i,a,o,s,l,"throw",t)}s(void 0)}))}}const s={meta:{global:!1},methods:{onAction:function(t){var e=this;return i(regeneratorRuntime.mark((function n(){var a,o,r,i,s,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.ctx,o=t.action,r=t.item,i=r.flowLayoutManager,s=r.task,l=s.flowTaskId,"viewAtom"!==o.name){n.next=10;break}return n.next=7,e._viewAtom({ctx:a,action:o,flowLayoutManager:i,task:s,flowTaskId:l});case 7:return n.abrupt("return",n.sent);case 10:if("assigneesConfirmation"!==o.name){n.next=16;break}return n.next=13,e._assigneesConfirmation({ctx:a,action:o,flowLayoutManager:i,task:s,flowTaskId:l});case 13:return n.abrupt("return",n.sent);case 16:if("cancelFlow"!==o.name){n.next=22;break}return n.next=19,e._cancelFlow({ctx:a,action:o,flowLayoutManager:i,task:s,flowTaskId:l});case 19:return n.abrupt("return",n.sent);case 22:if("handleTask"!==o.name){n.next=28;break}return n.next=25,e._handleTask({ctx:a,action:o,flowLayoutManager:i,task:s,flowTaskId:l});case 25:return n.abrupt("return",n.sent);case 28:if("recall"!==o.name){n.next=32;break}return n.next=31,e._recall({ctx:a,action:o,flowLayoutManager:i,task:s,flowTaskId:l});case 31:return n.abrupt("return",n.sent);case 32:case"end":return n.stop()}}),n)})))()},_viewAtom:function(t){return i(regeneratorRuntime.mark((function e(){var n,a,r,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.ctx,a=t.flowLayoutManager,r=t.task,i=t.flowTaskId,r._viewAtomData){e.next=6;break}return e.next=4,n.$api.post("/a/flowtask/task/viewAtom",{flowTaskId:i});case 4:s=e.sent,o().set(r,"_viewAtomData",s);case 6:n.$view.navigate("/a/flowtask/flowTaskAtom?flowTaskId=".concat(i,"&mode=view"),{context:{params:{flowLayoutManager:a,task:r,data:r._viewAtomData}}});case 7:case"end":return e.stop()}}),e)})))()},_handleTask:function(t){return i(regeneratorRuntime.mark((function e(){var n,a,r,i,s,l,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.ctx,a=t.action,r=t.flowLayoutManager,i=t.task,s=t.flowTaskId,i.timeClaimed){e.next=6;break}return e.next=4,n.$api.post("/a/flowtask/task/claim",{flowTaskId:s});case 4:l=e.sent,i.timeClaimed=l.timeClaimed;case 6:if(void 0!==i._editAtomData){e.next=11;break}return e.next=9,n.$api.post("/a/flowtask/task/editAtom",{flowTaskId:s});case 9:c=e.sent,o().set(i,"_editAtomData",c);case 11:if(i._editAtomData){e.next=14;break}return n.$refs.actionHandleTask.open({flowLayoutManager:r,flowTaskId:s,action:a,callback:null}),e.abrupt("return");case 14:u={context:{params:{flowLayoutManager:r,task:i,data:i._editAtomData,action:a}}},"/a/flowtask/flowTaskAtom"===n.$pageRoute.path&&(u.target="_self",u.reloadCurrent=!0),n.$view.navigate("/a/flowtask/flowTaskAtom?flowTaskId=".concat(s,"&mode=edit"),u);case 17:case"end":return e.stop()}}),e)})))()},_assigneesConfirmation:function(t){return i(regeneratorRuntime.mark((function e(){var n,a,o,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ctx,a=t.flowLayoutManager,o=t.flowTaskId,e.next=3,n.$api.post("/a/flowtask/task/assignees",{flowTaskId:o});case 3:r=e.sent,i={context:{params:{flowTaskId:o,assignees:r},callback:function(t){200===t&&a.base_loadData().then((function(){}))}}},"/a/flowtask/flowTaskAtom"===n.$pageRoute.path&&(i.target="_self",i.reloadCurrent=!0),n.$view.navigate("/a/flowtask/assigneesConfirmation?flowTaskId=".concat(o),i);case 7:case"end":return e.stop()}}),e)})))()},_recall:function(t){return i(regeneratorRuntime.mark((function e(){var n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ctx,a=t.flowLayoutManager,o=t.flowTaskId,e.next=3,n.$view.dialog.confirm(n.$text("RecallPrompt"));case 3:return e.next=5,n.$api.post("/a/flowtask/task/recall",{flowTaskId:o});case 5:return e.next=7,a.base_loadData();case 7:case"end":return e.stop()}}),e)})))()},_cancelFlow:function(t){return i(regeneratorRuntime.mark((function e(){var n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.ctx,a=t.flowLayoutManager,o=t.flowTaskId,n.$refs.actionCancelFlow.open({flowLayoutManager:a,flowTaskId:o});case 2:case"end":return e.stop()}}),e)})))()}}};function l(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}const c={meta:{global:!1},props:{layoutManager:{type:Object},layoutConfig:{type:Object}},data:function(){return{items:[]}},created:function(){this.layoutManager.layout.instance=this},methods:{onPageRefresh:function(t){this.$refs.loadMore.reload(t)},onPageInfinite:function(){this.$refs.loadMore.loadMore()},onPageClear:function(){this.$refs.loadMore.clear()},onLoadClear:function(t){this.items=[],t()},onLoadMore:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){var a,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.index,(o=n.layoutManager.base_prepareSelectParams()).options.page={index:a},e.next=5,n.$api.post("/a/flow/flow/select",o);case 5:return r=e.sent,n.items=n.items.concat(r.list),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function i(t){l(r,a,o,i,s,"next",t)}function s(t){l(r,a,o,i,s,"throw",t)}i(void 0)}))})()},getBlockComponentOptions:function(t){var e=t.blockConfig;return{props:{layoutManager:this.layoutManager,layout:this,blockConfig:e}}},getItems:function(){return this.items},_renderBlock:function(t){var e=t.blockName,n=this.$createElement,a=this.layoutConfig.blocks[e];return a?n("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:this.getBlockComponentOptions({blockConfig:a})}}):null},_renderLoadMore:function(){return(0,this.$createElement)("eb-load-more",{ref:"loadMore",props:{onLoadClear:this.onLoadClear,onLoadMore:this.onLoadMore},attrs:{autoInit:!0}})}},render:function(){var t=arguments[0];return t("div",[this._renderBlock({blockName:"items"}),this._renderLoadMore()])}},u={meta:{global:!1},props:{layoutManager:{type:Object},blockConfig:{type:Object}},data:function(){return{}},created:function(){},methods:{},render:function(){var t=arguments[0];return t("f7-nav-right")}};function f(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw r}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const d={meta:{global:!1},props:{layoutManager:{type:Object},layout:{type:Object},blockConfig:{type:Object}},data:function(){return{}},mounted:function(){},beforeDestroy:function(){},methods:{onItemClick:function(t,e){var n="/a/flowtask/flow?flowId=".concat(e.flowId);this.$view.navigate(n)},_getItemMetaMedia:function(t){var e=t._meta&&t._meta.media||t.avatar||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(e,24)},_getItemMetaMediaLabel:function(t){return t._meta&&t._meta.mediaLabel||t.userName},_getItemMetaSummary:function(t){return t._meta&&t._meta.summary||""},_getItemMetaFlags:function(t){var e=[];return t.flowNodeNameCurrentLocale&&e.push(t.flowNodeNameCurrentLocale),t.flowRemarkLocale&&e.push(t.flowRemarkLocale),e},_renderListItem:function(t){var e,n=this,a=this.$createElement,o=a("div",{slot:"media"},[a("img",{class:"avatar avatar24",attrs:{src:this._getItemMetaMedia(t)}})]),r=a("div",{slot:"root-start",class:"header"},[a("div",{class:"mediaLabel"},[a("span",[this._getItemMetaMediaLabel(t)])]),a("div",{class:"date"},[a("span",[this.$meta.util.formatDateTimeRelative(t.timeEnd||t.updatedAt)])])]),i=a("div",{slot:"title",class:"title"},[a("div",[t.flowName])]),s=a("div",{slot:"root-end",class:"summary"},[this._getItemMetaSummary(t)]),l=[],c=f(this._getItemMetaFlags(t));try{for(c.s();!(e=c.n()).done;){var u=e.value;l.push(a("f7-badge",{key:u},[u]))}}catch(t){c.e(t)}finally{c.f()}var m=a("div",{slot:"after",class:"after"},[l]);return a("eb-list-item",{class:"item",key:t.flowId,attrs:{link:"#"},props:{onPerform:function(e){return n.onItemClick(e,t)}}},[o,r,i,s,m])},_renderList:function(){var t,e=this.$createElement,n=[],a=f(this.layout.items);try{for(a.s();!(t=a.n()).done;){var o=t.value;n.push(this._renderListItem(o))}}catch(t){a.e(t)}finally{a.f()}return e("f7-list",[n])}},render:function(){var t=arguments[0];return t("div",[this._renderList()])}};function h(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}const p={meta:{global:!1},props:{layoutManager:{type:Object},layoutConfig:{type:Object}},data:function(){return{items:[]}},created:function(){this.layoutManager.layout.instance=this},methods:{onPageRefresh:function(t){this.$refs.loadMore.reload(t)},onPageInfinite:function(){this.$refs.loadMore.loadMore()},onPageClear:function(){this.$refs.loadMore.clear()},onLoadClear:function(t){this.items=[],t()},onLoadMore:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){var a,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.index,(o=n.layoutManager.base_prepareSelectParams()).options.page={index:a},e.next=5,n.$api.post("/a/flowtask/task/select",o);case 5:return r=e.sent,n.items=n.items.concat(r.list),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function i(t){h(r,a,o,i,s,"next",t)}function s(t){h(r,a,o,i,s,"throw",t)}i(void 0)}))})()},getBlockComponentOptions:function(t){var e=t.blockConfig;return{props:{layoutManager:this.layoutManager,layout:this,blockConfig:e}}},getItems:function(){return this.items},_renderBlock:function(t){var e=t.blockName,n=this.$createElement,a=this.layoutConfig.blocks[e];return a?n("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:this.getBlockComponentOptions({blockConfig:a})}}):null},_renderLoadMore:function(){return(0,this.$createElement)("eb-load-more",{ref:"loadMore",props:{onLoadClear:this.onLoadClear,onLoadMore:this.onLoadMore},attrs:{autoInit:!0}})}},render:function(){var t=arguments[0];return t("div",[this._renderBlock({blockName:"items"}),this._renderLoadMore()])}},b={meta:{global:!1},props:{layoutManager:{type:Object},blockConfig:{type:Object}},data:function(){return{}},created:function(){},methods:{},render:function(){var t=arguments[0];return t("f7-nav-right")}};function g(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw r}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const v={meta:{global:!1},props:{layoutManager:{type:Object},layout:{type:Object},blockConfig:{type:Object}},data:function(){return{}},mounted:function(){},beforeDestroy:function(){},methods:{onItemClick:function(t,e){var n="/a/flowtask/flow?flowId=".concat(e.flowId,"&flowTaskId=").concat(e.flowTaskId);this.$view.navigate(n)},_getItemMetaMedia:function(t){var e=t._meta&&t._meta.media||t.flowUserAvatar||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(e,24)},_getItemMetaMediaLabel:function(t){return t._meta&&t._meta.mediaLabel||t.flowUserName},_getItemMetaSummary:function(t){return t._meta&&t._meta.summary||""},_getItemMetaFlags:function(t){var e=[];t.flowNodeNameLocale&&e.push(t.flowNodeNameLocale);var n=this._getHandleRemark(t);return n&&e.push(n),e},_getHandleRemark:function(t){return t.handleRemarkLocale?t.handleRemarkLocale:0===t.flowTaskStatus&&1===t.specificFlag?this.$text("AssigneesConfirmationPrompt"):0===t.flowTaskStatus&&2===t.specificFlag?this.$text("Recall Available"):void 0},_renderListItem:function(t){var e,n=this,a=this.$createElement,o=a("div",{slot:"media"},[a("img",{class:"avatar avatar24",attrs:{src:this._getItemMetaMedia(t)}})]),r=a("div",{slot:"root-start",class:"header"},[a("div",{class:"mediaLabel"},[a("span",[this._getItemMetaMediaLabel(t)])]),a("div",{class:"date"},[a("span",[this.$meta.util.formatDateTimeRelative(t.timeHandled||t.updatedAt)])])]),i=a("div",{slot:"title",class:"title"},[a("div",[t.flowName])]),s=a("div",{slot:"root-end",class:"summary"},[this._getItemMetaSummary(t)]),l=[],c=g(this._getItemMetaFlags(t));try{for(c.s();!(e=c.n()).done;){var u=e.value;l.push(a("f7-badge",{key:u},[u]))}}catch(t){c.e(t)}finally{c.f()}var f=a("div",{slot:"after",class:"after"},[l]);return a("eb-list-item",{class:"item",key:t.flowTaskId,attrs:{link:"#"},props:{onPerform:function(e){return n.onItemClick(e,t)}}},[o,r,i,s,f])},_renderList:function(){var t,e=this.$createElement,n=[],a=g(this.layout.items);try{for(a.s();!(t=a.n()).done;){var o=t.value;n.push(this._renderListItem(o))}}catch(t){a.e(t)}finally{a.f()}return e("f7-list",[n])}},render:function(){var t=arguments[0];return t("div",[this._renderList()])}},k={meta:{global:!1},props:{layoutManager:{type:Object},layoutConfig:{type:Object}},data:function(){return{}},created:function(){this.layoutManager.layout.instance=this,this.layoutManager.subnavbar.enable=!0},methods:{getBlockComponentOptions:function(t){var e=t.blockConfig;return{props:{layoutManager:this.layoutManager,layout:this,blockConfig:e}}},_renderBlock:function(t){var e=t.blockName,n=this.$createElement,a=this.layoutConfig.blocks[e];return a?n("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:this.getBlockComponentOptions({blockConfig:a})}}):null}},render:function(){var t=arguments[0];return t("div",[this._renderBlock({blockName:"main"})])}},w={meta:{global:!1},props:{layoutManager:{type:Object},blockConfig:{type:Object}},data:function(){return{}},created:function(){},methods:{},render:function(){var t=arguments[0];return t("f7-nav-right",[this.layoutManager.info_renderFlowStatus()])}},_={meta:{global:!1},props:{layoutManager:{type:Object},blockConfig:{type:Object}},data:function(){return{}},methods:{_renderActionsLeft:function(){return(0,this.$createElement)("div",{class:"actions-block actions-block-left"},[this.layoutManager.info_renderActionsLeft()])},_renderActionsRight:function(){return(0,this.$createElement)("div",{class:"actions-block actions-block-right"},[this.layoutManager.info_renderActionsRight()])}},render:function(){var t=arguments[0];return t("f7-subnavbar",[t("div",{class:"atom-item-subnavbar-container"},[this._renderActionsLeft(),this._renderActionsRight()])])}},x={meta:{global:!1},props:{layoutManager:{type:Object},layout:{type:Object},blockConfig:{type:Object}},data:function(){return{}},render:function(){var t=arguments[0],e=this.layoutManager.timeline_render(),n=this.layoutManager.actions_renderActionComponents();return t("div",[e,n])}},C={meta:{global:!1},props:{layoutManager:{type:Object},layoutConfig:{type:Object}},data:function(){return{}},created:function(){this.layoutManager.layout.instance=this,this.layoutManager.subnavbar.enable=!1},methods:{getBlockComponentOptions:function(t){var e=t.blockConfig;return{props:{layoutManager:this.layoutManager,layout:this,blockConfig:e}}},_renderBlock:function(t){var e=t.blockName,n=this.$createElement,a=this.layoutConfig.blocks[e];return a?n("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:this.getBlockComponentOptions({blockConfig:a})}}):null}},render:function(){var t=arguments[0];return t("div",[this._renderBlock({blockName:"main"})])}},A={meta:{global:!1},props:{layoutManager:{type:Object},blockConfig:{type:Object}},data:function(){return{}},created:function(){},methods:{},render:function(){var t=arguments[0];return t("f7-nav-right",{class:"atom-item-title-info-container"},[this.layoutManager.info_renderActionsLeft(),this.layoutManager.info_renderActionsRight(),this.layoutManager.info_renderFlowStatus()])}},$={meta:{global:!1},props:{layoutManager:{type:Object},layoutConfig:{type:Object}},data:function(){return{}},created:function(){this.layoutManager.layout.instance=this},methods:{getBlockComponentOptions:function(t){var e=t.blockConfig;return{props:{layoutManager:this.layoutManager,layout:this,blockConfig:e}}},_renderBlock:function(t){var e=t.blockName,n=this.$createElement,a=this.layoutConfig.blocks[e];return a?n("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:this.getBlockComponentOptions({blockConfig:a})}}):null}},render:function(){var t=arguments[0];return t("div",[this._renderBlock({blockName:"main"})])}},T={meta:{global:!1},props:{layoutManager:{type:Object},blockConfig:{type:Object}},data:function(){return{}},created:function(){},methods:{},render:function(){var t=arguments[0];return t("f7-nav-right",[this.layoutManager.actions_render()])}},I={meta:{global:!1},props:{layoutManager:{type:Object},layout:{type:Object},blockConfig:{type:Object}},data:function(){return{}},render:function(){var t=arguments[0],e=this.layoutManager.validate_render(),n=this.layoutManager.actions_renderActionComponents();return t("div",[e,n])}};var M=n(862),L=n(119);const P={action:s,flowListLayoutList:c,flowListLayoutBlockListTitle:u,flowListLayoutBlockListItems:d,flowTaskListLayoutList:p,flowTaskListLayoutBlockListTitle:b,flowTaskListLayoutBlockListItems:v,flowLayoutMobile:k,flowLayoutBlockMobileTitle:w,flowLayoutBlockMobileSubnavbar:_,flowLayoutBlockMobileMain:x,flowLayoutPC:C,flowLayoutBlockPCTitle:A,atomLayoutMobile:$,atomLayoutBlockMobileTitle:T,atomLayoutBlockMobileMain:I,flowTaskTab:M.Z,flowTab:L.Z}},788:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a={flowTask:{actions:{viewAtom:{title:"View",actionModule:"a-flowtask",actionComponent:"action",icon:{material:"visibility"}},handleTask:{title:"Handle",actionModule:"a-flowtask",actionComponent:"action",icon:{material:"play_arrow"}},cancelFlow:{title:"Cancel Flow",actionModule:"a-flowtask",actionComponent:"action",icon:{material:"stop"}},assigneesConfirmation:{title:"Confirmation",actionModule:"a-flowtask",actionComponent:"action",icon:{material:"group"}},recall:{title:"Recall",actionModule:"a-flowtask",actionComponent:"action",icon:{material:"undo"}}},render:{list:{layouts:{list:{component:{module:"a-flowtask",name:"flowTaskListLayoutList"},blocks:{title:{component:{module:"a-flowtask",name:"flowTaskListLayoutBlockListTitle"}},items:{component:{module:"a-flowtask",name:"flowTaskListLayoutBlockListItems"}}}}}},atom:{info:{attachment:!0,comment:!0},layouts:{mobile:{component:{module:"a-flowtask",name:"atomLayoutMobile"},blocks:{title:{component:{module:"a-flowtask",name:"atomLayoutBlockMobileTitle"}},main:{component:{module:"a-flowtask",name:"atomLayoutBlockMobileMain"}}}}}}}},flow:{render:{list:{layouts:{list:{component:{module:"a-flowtask",name:"flowListLayoutList"},blocks:{title:{component:{module:"a-flowtask",name:"flowListLayoutBlockListTitle"}},items:{component:{module:"a-flowtask",name:"flowListLayoutBlockListItems"}}}}}},item:{info:{attachment:!0,comment:!0},layouts:{mobile:{component:{module:"a-flowtask",name:"flowLayoutMobile"},blocks:{title:{component:{module:"a-flowtask",name:"flowLayoutBlockMobileTitle"}},subnavbar:{component:{module:"a-flowtask",name:"flowLayoutBlockMobileSubnavbar"}},main:{component:{module:"a-flowtask",name:"flowLayoutBlockMobileMain"}}}},pc:{component:{module:"a-flowtask",name:"flowLayoutPC"},blocks:{title:{component:{module:"a-flowtask",name:"flowLayoutBlockPCTitle"}},main:{component:{module:"a-flowtask",name:"flowLayoutBlockMobileMain"}}}}}}}},flowTaskHandleStatuses:{1:{color:"teal",text:"Passed"},2:{color:"gray",text:"Rejected"},3:{color:"gray",text:"Cancelled"}},flowHandleStatuses:{1:{color:"teal",text:"End"},2:{color:"gray",text:"Rejected"},3:{color:"gray",text:"Cancelled"}}}},933:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a={FlowTitle:"Flow",DraftingAgain:"Drafting Again",ConfirmationAllowAppend:"Allow Append Assignees",AssigneesConfirmationPrompt:"Please confirm the assignees",CancelFlowPrompt:"Are you sure to cancel this flow?",TaskPassPrompt:"Are you sure to pass this task?",TaskRejectPrompt:"Are you sure to reject this task?",RecallPrompt:"Are you sure to recall this task?",FlowOrTaskNotExists:"Work Flow or Task does not exist"}},978:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a={FlowTitle:"流程",Task:"任务",End:"结束",Current:"当前",Drafting:"起草",Pass:"通过",Reject:"驳回",Passed:"已通过",Rejected:"已驳回",Cancelled:"已取消",View:"查看",Handle:"处理",Outdated:"已过期",Remark:"说明",Submitted:"已提交",Assignees:"参与人",Confirmation:"确认",Bidding:"竞标",DraftingAgain:"再次起草",ConfirmationAllowAppend:"允许添加参与人",AssigneesConfirmationPrompt:"请确认参与人",CancelFlowPrompt:"您确认要取消本流程吗？",TaskPassPrompt:"您确认要通过本任务吗？",TaskRejectPrompt:"您确认要驳回本任务吗？",RecallPrompt:"您确认要撤回本任务吗？",FlowOrTaskNotExists:"流程或任务已经不存在","Assignees Confirmation":"参与人确认","Cancel Flow":"取消流程","Recall Available":"可撤回","Show Assignees":"显示参与人","Completion Condition":"完成条件","Confirmation Assignees":"确认参与人","Rejected Node":"驳回节点","Allow Pass Task":"允许通过任务","Allow Reject Task":"允许驳回任务","Allow Cancel Flow":"允许取消流程","Allow Recall":"允许撤回","User Task Options":"用户任务选项","Condition Expression":"条件表达式"}},137:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a={"en-us":n(933).Z,"zh-cn":n(978).Z}},644:(t,e,n)=>{"use strict";function a(t){return n(142)("./".concat(t,".vue")).default}function o(t){return n(990)("./".concat(t,".jsx")).default}n.d(e,{Z:()=>r});const r=[{path:"flow",component:o("flow")},{path:"flow/list",component:o("flowList")},{path:"flowTask/list",component:o("flowTaskList")},{path:"flowTaskAtom",component:o("flowTaskAtom")},{path:"assigneesConfirmation",component:o("assigneesConfirmation")},{path:"flowTask/tabs",component:a("flowTaskTabs")},{path:"flow/tabs",component:a("flowTabs")}]},81:(t,e,n)=>{"use strict";function a(t){return{state:{},getters:{},mutations:{},actions:{}}}n.d(e,{Z:()=>a})},609:(t,e,n)=>{"use strict";function a(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}n.d(e,{Z:()=>o});const o={mixins:[{data:function(){return{base:{ready:!1,configFlowBase:null,config:null}}},computed:{base_user:function(){return this.$store.state.auth.user.op}},created:function(){},methods:{base_prepareSelectOptions:function(){var t={where:{}};return t.layout=this.layout.current,t.orders=[["a.updatedAt","desc"]],this.container.options&&(t=this.$utils.extend({},t,this.container.options)),t},base_prepareSelectParams:function(){return{options:this.base_prepareSelectOptions()}},base_getItems:function(){return this.layout.instance?this.layout.instance.getItems():[]}}},{data:function(){return{}},methods:{page_onRefresh:function(t){t&&t(),this.layout.instance&&this.layout.instance.onPageRefresh(!0)},page_onInfinite:function(){this.layout.instance&&this.layout.instance.onPageInfinite()},page_onClear:function(){this.layout.instance&&this.layout.instance.onPageClear()},page_getTitle:function(){var t=this.container.options&&this.container.options.mode;return"mine"===t?"".concat(this.$text("Flow"),": ").concat(this.$text("Initiateds")):"others"===t?"".concat(this.$text("Flow"),": ").concat(this.$text("Participateds")):"history"===t?"".concat(this.$text("Flow"),": ").concat(this.$text("Ends")):this.$text("Flow")},page_getSubtitle:function(){return""}}},{data:function(){return{layout:{current:null,config:null,instance:null}}},created:function(){this.layout.current=this.container.layout||this.layout_get()},methods:{layout_get:function(){return"small"===this.$view.size?"list":"table"},layout_prepareConfig:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.base.configFlowBase=e.$meta.config.modules["a-flowtask"].flow,e.base.config=e.base.configFlowBase,(n=e.$meta.util.getProperty(e.base.config,"render.list.layouts.".concat(e.layout.current)))||(n=e.$meta.util.getProperty(e.base.config,"render.list.layouts.list")),e.layout.config=n;case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function s(t){a(i,o,r,s,l,"next",t)}function l(t){a(i,o,r,s,l,"throw",t)}s(void 0)}))})()},layout_getComponentOptions:function(){return{props:{layoutManager:this,layoutConfig:this.layout.config}}},layout_renderComponent:function(){var t=this.$createElement;return this.base.ready?t("eb-component",{attrs:{module:this.layout.config.component.module,name:this.layout.config.component.name,options:this.layout_getComponentOptions()}}):null},layout_getBlockComponentOptions:function(t){return{props:{layoutManager:this,blockConfig:t.blockConfig}}},layout_renderBlock:function(t){var e=t.blockName,n=this.$createElement;if(!this.base.ready)return null;var a=this.layout.config.blocks[e];return a?n("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:this.layout_getBlockComponentOptions({blockConfig:a})}}):null},layout_renderLayout:function(){return(0,this.$createElement)("div",[this.layout_renderComponent()])}}}],data:function(){return{}},created:function(){var t=this;this.layout_prepareConfig().then((function(){t.base.ready=!0}))},beforeDestroy:function(){this.layout.instance=null,this.$emit("layoutManager:destroy")}}},46:(t,e,n)=>{"use strict";function a(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}n.d(e,{Z:()=>o});const o={mixins:[{data:function(){return{base:{ready:!1,configFlowBase:null,config:null}}},computed:{base_user:function(){return this.$store.state.auth.user.op}},created:function(){},methods:{base_prepareSelectOptions:function(){var t={where:{}};return t.layout=this.layout.current,t.orders=[["a.updatedAt","desc"]],this.container.options&&(t=this.$utils.extend({},t,this.container.options)),t},base_prepareSelectParams:function(){return{options:this.base_prepareSelectOptions()}},base_getItems:function(){return this.layout.instance?this.layout.instance.getItems():[]}}},{data:function(){return{}},methods:{page_onRefresh:function(t){t&&t(),this.layout.instance&&this.layout.instance.onPageRefresh(!0)},page_onInfinite:function(){this.layout.instance&&this.layout.instance.onPageInfinite()},page_onClear:function(){this.layout.instance&&this.layout.instance.onPageClear()},page_getTitle:function(){var t=this.container.options&&this.container.options.mode;return"claimings"===t?"".concat(this.$text("Task"),": ").concat(this.$text("Claimings")):"handlings"===t?"".concat(this.$text("Task"),": ").concat(this.$text("Handlings")):"completeds"===t?"".concat(this.$text("Task"),": ").concat(this.$text("Completeds")):this.$text("Task")},page_getSubtitle:function(){return""}}},{data:function(){return{layout:{current:null,config:null,instance:null}}},created:function(){this.layout.current=this.container.layout||this.layout_get()},methods:{layout_get:function(){return"small"===this.$view.size?"list":"table"},layout_prepareConfig:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.base.configFlowBase=e.$meta.config.modules["a-flowtask"].flowTask,e.base.config=e.base.configFlowBase,(n=e.$meta.util.getProperty(e.base.config,"render.list.layouts.".concat(e.layout.current)))||(n=e.$meta.util.getProperty(e.base.config,"render.list.layouts.list")),e.layout.config=n;case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function s(t){a(i,o,r,s,l,"next",t)}function l(t){a(i,o,r,s,l,"throw",t)}s(void 0)}))})()},layout_getComponentOptions:function(){return{props:{layoutManager:this,layoutConfig:this.layout.config}}},layout_renderComponent:function(){var t=this.$createElement;return this.base.ready?t("eb-component",{attrs:{module:this.layout.config.component.module,name:this.layout.config.component.name,options:this.layout_getComponentOptions()}}):null},layout_getBlockComponentOptions:function(t){return{props:{layoutManager:this,blockConfig:t.blockConfig}}},layout_renderBlock:function(t){var e=t.blockName,n=this.$createElement;if(!this.base.ready)return null;var a=this.layout.config.blocks[e];return a?n("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:this.layout_getBlockComponentOptions({blockConfig:a})}}):null},layout_renderLayout:function(){return(0,this.$createElement)("div",[this.layout_renderComponent()])}}}],data:function(){return{}},created:function(){var t=this;this.layout_prepareConfig().then((function(){t.base.ready=!0}))},beforeDestroy:function(){this.layout.instance=null,this.$emit("layoutManager:destroy")}}},957:(t,e,n)=>{"use strict";function a(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}n.d(e,{Z:()=>o});const o={data:function(){return{flowLayoutManager:null,flowTaskId:0,remark:"",pathThis:null}},created:function(){this.pathThis=this.$f7route.path},methods:{onFormSubmit:function(){this.$refs.buttonSubmit.onClick()},onSubmit:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$view.dialog.confirm(e.$text("CancelFlowPrompt"));case 2:return t.next=4,e.$api.post("/a/flowtask/task/cancelFlow",{flowTaskId:e.flowTaskId,handle:{remark:e.remark}});case 4:return t.next=6,e.flowLayoutManager.base_loadData();case 6:e.$refs.sheet.f7Sheet.close(!1),"/a/flowtask/flowTaskAtom"===e.pathThis&&e.$f7router.back();case 8:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function s(t){a(i,o,r,s,l,"next",t)}function l(t){a(i,o,r,s,l,"throw",t)}s(void 0)}))})()},open:function(t){var e=t.flowLayoutManager,n=t.flowTaskId;this.flowLayoutManager=e,this.flowTaskId=n,this.$refs.sheet.f7Sheet.open()}},render:function(){var t=this,e=arguments[0];return e("f7-sheet",{ref:"sheet",attrs:{fill:!0}},[e("f7-toolbar",[e("div",{class:"left"}),e("div",{class:"right"},[e("eb-link",{ref:"buttonSubmit",props:{onPerform:function(e){return t.onSubmit(e)}}},[this.$text("Cancel Flow")])])]),e("f7-page-content",[e("eb-list",{attrs:{form:!0,"inline-labels":!0,"no-hairlines-md":!0},on:{submit:function(e){return t.onFormSubmit(e)}}},[e("eb-list-input",{attrs:{label:this.$text("Remark"),type:"text","clear-button":!0,placeholder:this.$text("Remark")},model:{value:t.remark,callback:function(e){t.remark=e}}})])])])}}},801:(t,e,n)=>{"use strict";function a(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function s(t){a(i,o,r,s,l,"next",t)}function l(t){a(i,o,r,s,l,"throw",t)}s(void 0)}))}}n.d(e,{Z:()=>r});const r={data:function(){return{flowLayoutManager:null,flowTaskId:0,action:null,remark:"",callback:null,pathThis:null}},created:function(){this.pathThis=this.$f7route.path},methods:{onFormSubmit:function(){},onSubmit:function(t,e){var n=this;return o(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.$view.dialog.confirm(n.$text(1===e?"TaskPassPrompt":"TaskRejectPrompt"));case 2:if(n.$refs.sheet.f7Sheet.close(!1),a={status:e,remark:n.remark},!n.callback){t.next=8;break}return t.next=7,n.callback({handle:a});case 7:return t.abrupt("return",t.sent);case 8:return t.next=10,n._submit({handle:a,formAtom:null});case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})))()},_submit:function(t){var e=this;return o(regeneratorRuntime.mark((function n(){var a,o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.handle,o=t.formAtom,r={flowTaskId:e.flowTaskId},a&&(r.handle=a),o&&(r.formAtom=o),n.next=6,e.$api.post("/a/flowtask/task/complete",r);case 6:return n.next=8,e.flowLayoutManager.base_loadData();case 8:a&&"/a/flowtask/flowTaskAtom"===e.pathThis&&e.$f7router.back();case 9:case"end":return n.stop()}}),n)})))()},init:function(t){var e=t.flowLayoutManager,n=t.flowTaskId,a=t.action,o=t.callback;this.flowLayoutManager=e,this.flowTaskId=n,this.action=a,this.callback=o},open:function(t){var e=t.flowLayoutManager,n=t.flowTaskId,a=t.action,o=t.callback;this.init({flowLayoutManager:e,flowTaskId:n,action:a,callback:o}),this.$refs.sheet.f7Sheet.open()}},render:function(){var t,e,n=this,a=arguments[0];return this.action&&this.action.options.allowPassTask&&(t=a("eb-link",{ref:"buttonSubmitPass",props:{onPerform:function(t){return n.onSubmit(t,1)}}},[this.$text("Pass")])),this.action&&this.action.options.allowRejectTask&&(e=a("eb-link",{ref:"buttonSubmitReject",props:{onPerform:function(t){return n.onSubmit(t,2)}}},[this.$text("Reject")])),a("f7-sheet",{ref:"sheet",attrs:{fill:!0}},[a("f7-toolbar",[a("div",{class:"left"}),a("div",{class:"right display-flex align-items-center"},[t,e])]),a("f7-page-content",[a("eb-list",{attrs:{form:!0,"inline-labels":!0,"no-hairlines-md":!0},on:{submit:function(t){return n.onFormSubmit(t)}}},[a("eb-list-input",{attrs:{label:this.$text("Remark"),type:"text","clear-button":!0,placeholder:this.$text("Remark")},model:{value:n.remark,callback:function(t){n.remark=t}}})])])])}}},119:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a={meta:{global:!1},mixins:[n(609).Z],props:{container:{type:Object}},data:function(){return{}},created:function(){},methods:{reload:function(t){this.layout.instance&&this.layout.instance.onPageRefresh(t)},loadMore:function(){this.layout.instance&&this.layout.instance.onPageInfinite()}},render:function(){return this.layout_renderLayout()}}},862:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a={meta:{global:!1},mixins:[n(46).Z],props:{container:{type:Object}},data:function(){return{}},created:function(){},methods:{reload:function(t){this.layout.instance&&this.layout.instance.onPageRefresh(t)},loadMore:function(){this.layout.instance&&this.layout.instance.onPageInfinite()}},render:function(){return this.layout_renderLayout()}}},932:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(5);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function r(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}const i={mixins:[n.n(a)().prototype.$meta.module.get("a-components").options.mixins.ebPageContext],data:function(){return{selectedUsers:null}},computed:{flowTaskId:function(){return this.contextParams.flowTaskId},assignees:function(){return this.contextParams.assignees}},created:function(){this.selectedUsers=this.assignees.users.map((function(t){return t.id}))},methods:{onPerform:function(t,e){var n,a=this;return(n=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.$view.dialog.confirm();case 2:return t.next=4,a.$api.post("/a/flowtask/task/assigneesConfirmation",{flowTaskId:a.flowTaskId,handle:{status:e,assignees:1===e?{users:a.selectedUsers}:void 0}});case 4:a.contextCallback(200,!0),a.$f7router.back();case 6:case"end":return t.stop()}}),t)})),function(){var t=this,e=arguments;return new Promise((function(a,o){var i=n.apply(t,e);function s(t){r(i,a,o,s,l,"next",t)}function l(t){r(i,a,o,s,l,"throw",t)}s(void 0)}))})()},onItemChange:function(t,e){var n=this.selectedUsers.findIndex((function(t){return t===e.id}));t.target.checked&&-1===n?this.selectedUsers.push(e.id):!t.target.checked&&n>-1&&this.selectedUsers.splice(n,1)},_getItemChecked:function(t){return this.selectedUsers.findIndex((function(e){return e===t.id}))>-1},_getItemMetaMedia:function(t){var e=t.avatar||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(e,24)},renderUsers:function(){var t,e=this,n=this.$createElement,a=this.assignees.users,r=[],i=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}(a);try{var s=function(){var a=t.value;r.push(n("eb-list-item",{class:"item",key:a.id,attrs:{checkbox:!0,checked:e._getItemChecked(a)},on:{change:function(t){return e.onItemChange(t,a)}}},[n("div",{slot:"title",class:"display-flex align-items-center"},[n("img",{class:"avatar avatar24",attrs:{src:e._getItemMetaMedia(a)}}),n("span",[a.userName])])]))};for(i.s();!(t=i.n()).done;)s()}catch(t){i.e(t)}finally{i.f()}return n("f7-list",[r])}},render:function(){var t,e=this,n=arguments[0];return this.selectedUsers.length>0&&(t=n("eb-link",{props:{onPerform:function(t){return e.onPerform(t,1)}}},[this.$text("Pass")])),n("eb-page",[n("eb-navbar",{attrs:{title:this.$text("Assignees Confirmation"),"eb-back-link":"Back"}},[n("f7-nav-right",[t,n("eb-link",{props:{onPerform:function(t){return e.onPerform(t,2)}}},[this.$text("Reject")])])]),this.renderUsers()])}}},926:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>A});var a=n(5),o=n.n(a);function r(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const u={data:function(){return{base:{ready:!1,configFlowBase:null,configAtom:null,config:null,data:null,notfound:!1}}},computed:{base_ready:function(){return this.base.ready&&this.base.data},base_user:function(){return this.$store.state.auth.user.op},base_flow:function(){return this.base.data&&this.base.data.flow},base_atom:function(){return this.base.data&&this.base.data.atom},base_tasks:function(){return this.base.data&&this.base.data.tasks},base_flowOld:function(){if(!this.base_ready)return!1;var t=this.base_atom,e=this.base_flow;return!t||t.atomFlowId!==e.flowId},base_atomClass:function(){return this.base.data&&this.base.data.atom?{module:this.base.data.atom.module,atomClassName:this.base.data.atom.atomClassName}:null},base_tasksGroup:function(){var t=this.base_tasks;if(!t)return null;var e,n=[],a=null,o=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw r}}}}(t);try{for(o.s();!(e=o.n()).done;){var r=e.value;a&&a.flowNodeId===r.flowNodeId||(a=s(s({},r),{},{items:[]}),n.push(a)),a.items.push(r)}}catch(t){o.e(t)}finally{o.f()}return n}},created:function(){},mounted:function(){this.$meta.eventHub.$on("comment:action",this.base_onCommentChanged),this.$meta.eventHub.$on("attachment:action",this.base_onAttachmentChanged)},beforeDestroy:function(){this.$meta.eventHub.$off("comment:action",this.base_onCommentChanged),this.$meta.eventHub.$off("attachment:action",this.base_onAttachmentChanged)},methods:{base_loadData:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.base_flow,t.next=4,e.$api.post("/a/flowtask/flow/data",{flowId:e.container.flowId});case 4:if(e.base.data=t.sent,e.base.data){t.next=8;break}return e.base.notfound=!0,t.abrupt("return",!1);case 8:return a=e.base_flow,(o=e.base_atom)&&n&&a&&0===n.flowStatus&&1===a.flowStatus&&(e.$meta.eventHub.$emit("atom:action",{key:{atomId:o.atomId},action:{name:"delete"}}),e.$meta.eventHub.$emit("atom:action",{key:{atomId:o.atomIdFormal},action:{name:"save"}})),t.abrupt("return",!0);case 14:return t.prev=14,t.t0=t.catch(0),e.base.notfound=!0,t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,null,[[0,14]])})),function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function s(t){r(i,a,o,s,l,"next",t)}function l(t){r(i,a,o,s,l,"throw",t)}s(void 0)}))})()},base_getCurrentStage:function(){if(!this.base.item)return null;var t=this.base.item.atomStage;return 0===t?"draft":1===t?"formal":"history"},base_onCommentChanged:function(t){var e=this.base_atom;e&&t.atomId===e.atomId&&("create"===t.action&&(e.commentCount+=1),"delete"===t.action&&(e.commentCount-=1))},base_onAttachmentChanged:function(t){var e=this.base_atom;e&&t.atomId===e.atomId&&("create"===t.action&&(e.attachmentCount+=1),"delete"===t.action&&(e.attachmentCount-=1))}}};function f(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}const m={data:function(){return{layout:{current:null,config:null,instance:null}}},created:function(){this.layout.current=this.container.layout||this.layout_get()},methods:{layout_get:function(){return"small"===this.$view.size?"mobile":"pc"},layout_prepareConfig:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.base.configFlowBase=e.$meta.config.modules["a-flowtask"].flow,!(n=e.base_atomClass)){t.next=6;break}return t.next=5,e.$meta.module.use(n.module);case 5:e.base.configAtom=e.$meta.util.getProperty(e.$meta.config.modules[n.module],"flows.".concat(n.atomClassName));case 6:e.base.config=e.base.configAtom?e.$meta.util.extend({},e.base.configFlowBase,e.base.configAtom):e.base.configFlowBase,(a=e.$meta.util.getProperty(e.base.config,"render.item.layouts.".concat(e.layout.current)))||(a=e.$meta.util.getProperty(e.base.config,"render.item.layouts.mobile")),e.layout.config=a;case 10:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function i(t){f(r,a,o,i,s,"next",t)}function s(t){f(r,a,o,i,s,"throw",t)}i(void 0)}))})()},layout_getComponentOptions:function(){return{props:{layoutManager:this,layoutConfig:this.layout.config}}},layout_renderComponent:function(){var t=this.$createElement;return this.base.ready?t("eb-component",{attrs:{module:this.layout.config.component.module,name:this.layout.config.component.name,options:this.layout_getComponentOptions()}}):null},layout_getBlockComponentOptions:function(t){return{props:{layoutManager:this,blockConfig:t.blockConfig}}},layout_renderBlock:function(t){var e=t.blockName,n=this.$createElement;if(!this.base.ready)return null;var a=this.layout.config.blocks[e];return a?n("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:this.layout_getBlockComponentOptions({blockConfig:a})}}):null},layout_renderLayout:function(){var t=this.$createElement;return this.base.notfound?t("f7-card",[t("f7-card-header",[this.$text("Friendly Tips")]),t("f7-card-content",[this.$text("FlowOrTaskNotExists")])]):t("div",[this.layout_renderComponent()])}}};function d(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function i(t){d(r,a,o,i,s,"next",t)}function s(t){d(r,a,o,i,s,"throw",t)}i(void 0)}))}}const p={data:function(){return{}},methods:{info_onPerformFlowChart:function(){var t=this;return h(regeneratorRuntime.mark((function e(){var n,a,o,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container.flowId,e.next=3,t.$api.post("/a/flowchart/flow/flowChartProcess",{host:{flowId:n}});case 3:a=e.sent,o=t.base.data.tasks,r=o.filter((function(t){return 0===t.flowTaskStatus})).map((function(t){return t.flowNodeDefId})),i="/a/flowchart/flowDef/contentProcessView?flowId=".concat(n),t.$view.navigate(i,{target:void 0,context:{params:{contentProcess:a,flowNodeDefIds:r}}});case 8:case"end":return e.stop()}}),e)})))()},info_onPerformDraftingAgain:function(){var t=this;return h(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$view.dialog.confirm();case 2:if(n=t.base.data.atom,a=t.getAction({module:n.module,atomClassName:n.atomClassName,name:"write"})){e.next=6;break}return e.abrupt("return");case 6:return a=t.$utils.extend({},a,{navigateOptions:{target:"_self",reloadCurrent:!0}}),e.next=9,t.$meta.util.performAction({ctx:t,action:a,item:n});case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))()},info_getItemMetaMedia:function(t){var e=t||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(e,16)},info_renderActionsLeft:function(){var t=this.$createElement;if(this.base_ready){var e=this.base.data.flow,n=this.base.data.atom,a=[];return n?(this.base.config.render.item.info.comment&&a.push(t("eb-link",{key:"actionsLeft:comment",attrs:{iconMaterial:"comment",iconBadge:n.commentCount,"eb-href":"/a/basefront/comment/list?atomId=".concat(n.id)}})),this.base.config.render.item.info.attachment&&a.push(t("eb-link",{key:"actionsLeft:attachment",attrs:{iconMaterial:"attachment",iconBadge:n.attachmentCount,"eb-href":"/a/basefront/attachment/list?atomId=".concat(n.id)}})),a.push(t("eb-link",{key:"actionsLeft:flowChart",attrs:{iconMaterial:"account_tree"},props:{onPerform:this.info_onPerformFlowChart}})),1===e.flowStatus&&e.flowUserId===this.base_user.id&&a.push(t("eb-button",{key:"actionsLeft:draftingAgain",attrs:{color:"orange",small:!0,outline:!0},props:{onPerform:this.info_onPerformDraftingAgain}},[this.$text("DraftingAgain")]))):a.push(t("f7-badge",{attrs:{color:"gray"}},[this.$text("Outdated")])),a}},info_renderAvatar:function(){var t=this.$createElement,e=this.base.data.flow,n=[];return n.push(t("img",{key:"avatar:one",class:"avatar avatar16",attrs:{src:this.info_getItemMetaMedia(e.avatar),title:e.userName}})),t("div",{key:"avatar",class:"info-avatar"},[n])},info_renderDate:function(){var t=this.$createElement,e=this.base.data.flow,n=[],a=this.$meta.util.formatDateTime(e.createdAt),o=this.$meta.util.formatDateTime(e.timeEnd),r=!1;return e.timeEnd&&(r=!0,n.push(t("div",{key:"date:one"},[a]))),r?n.push(t("div",{key:"date:two"},[o])):(n.push(t("div",{key:"date:one2"},[this.$meta.util.formatDate(e.createdAt)])),n.push(t("div",{key:"date:two2"},[this.$meta.util.formatTime(e.createdAt)]))),t("div",{key:"date",class:"info-date"},[n])},info_renderActionsRight:function(){if(this.base_ready){var t=[];return t.push(this.info_renderAvatar()),t.push(this.info_renderDate()),t}},info_renderFlowStatus:function(){var t=this.$createElement;if(!this.base_ready)return null;var e=this.base.data.flow,n=this.$meta.config.modules["a-flowtask"].flowHandleStatuses[e.flowHandleStatus],a=[];if(1===e.flowStatus){var o="".concat(e.flowRemarkLocale||this.$text(n.text));a.push(t("f7-badge",{class:"eb-flowStatus",key:"flowStatus",attrs:{color:n.color}},[o]))}else{var r="".concat(this.$text("Current"),": ").concat(e.flowNodeNameCurrentLocale);a.push(t("f7-badge",{class:"eb-flowStatus",key:"flowStatus",attrs:{color:"orange"}},[r]))}return a}}};function b(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw r}}}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function y(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}const v={data:function(){return{timeline:{}}},methods:{_timeline_prepareActions:function(t){var e=t.task,n=t.enableView,a=[];return a=e._actions?a.concat(e._actions):a,n&&a.push({name:"viewAtom"}),a},timeline_onPerformTaskAction:function(t,e,n,a){var o,r=this;return(o=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.$meta.util.performAction({ctx:a||r,action:e,item:{flowLayoutManager:r,task:n}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})),function(){var t=this,e=arguments;return new Promise((function(n,a){var r=o.apply(t,e);function i(t){y(r,n,a,i,s,"next",t)}function s(t){y(r,n,a,i,s,"throw",t)}i(void 0)}))})()},_timeline_getActionBase:function(t){var e=this.$meta.config.modules["a-flowtask"].flowTask.actions[t.name];return this.$meta.util.extend({},e,t)},_timeline_renderFlowNodeItems:function(t){var e,n=t.tasks,a=this.$createElement,o=[],r=b(n);try{for(r.s();!(e=r.n()).done;){var i=e.value,s=this._timeline_renderFlowTask({task:i});s&&o.push(s)}}catch(t){r.e(t)}finally{r.f()}return a("f7-list",{attrs:{"medial-list":!0}},[o])},_timeline_renderFlowNode:function(t){var e,n=t.task,a=t.flowNodeGroupIndex,o=this.$createElement,r=o("f7-badge",{class:"flowNodeIndex",attrs:{color:"teal"}},[a]),i=o("span",[n.flowNodeNameLocale]);n.flowNodeId===this.base_flow.flowNodeIdCurrent&&(e=o("f7-badge",{attrs:{color:"orange"}},[this.$text("Current")]));var s=this._timeline_renderFlowNodeItems({tasks:n.items});return o("f7-card",{key:"flowNode:".concat(n.flowNodeId),attrs:{outline:!0}},[o("f7-card-header",[o("div",[r,i]),o("div",[void 0,e])]),o("f7-card-content",{attrs:{padding:!1}},[s])])},_timeline_renderFlowTaskStatus:function(t){var e=t.task,n=this.$createElement;if(0!==e.handleStatus){var a,o=this.$meta.config.modules["a-flowtask"].flowTaskHandleStatuses[e.handleStatus];return a="startEventAtom"===e.flowNodeType?this.$text("Submitted"):this.$text(o.text),n("f7-badge",{attrs:{color:o.color}},[a])}},_timeline_renderFlowTaskActionsChildren:function(t){var e=this,n=t.task,a=t.enableView,o=t.ctxParent,r=this.$createElement;if(n.userIdAssignee===this.base_user.id&&!this.base_flowOld){var i,s=[],l=b(this._timeline_prepareActions({task:n,enableView:a}));try{var c=function(){var t=i.value,a=e._timeline_getActionBase(t);s.push(r("eb-link",{key:a.name,attrs:{iconMaterial:a.icon.material},props:{onPerform:function(t){return e.timeline_onPerformTaskAction(t,a,n,o)}}}))};for(l.s();!(i=l.n()).done;)c()}catch(t){l.e(t)}finally{l.f()}return s}},_timeline_renderFlowTaskActions:function(t){var e=t.task,n=this.$createElement;if(e.userIdAssignee===this.base_user.id&&!this.base_flowOld){var a=0===e.specificFlag;return n("div",{class:"task-actions"},[this._timeline_renderFlowTaskActionsChildren({task:e,enableView:a})])}},_timeline_getHandleRemark:function(t){var e=t.task;return e.handleRemarkLocale?e.handleRemarkLocale:0===e.flowTaskStatus&&1===e.specificFlag?this.$text("AssigneesConfirmationPrompt"):0===e.flowTaskStatus&&2===e.specificFlag?this.$text("Recall Available"):void 0},_timeline_renderFlowTask:function(t){var e=t.task,n=this.$createElement;if(e.specificFlag>0&&e.userIdAssignee!==this.base_user.id)return null;var a,o=e.id===this.container.flowTaskId?"item flowTaskCurrent":"item",r=n("div",{slot:"media"},[n("img",{class:"avatar avatar24",attrs:{src:this.info_getItemMetaMedia(e.avatar)}})]);e.handleStatus>0&&(a=this.$meta.util.formatDateTime(e.timeHandled));var i=this._timeline_renderFlowTaskStatus({task:e}),s=n("div",{slot:"root-start",class:"header"},[n("div",{class:"mediaLabel"},[n("span",[a])]),n("div",{class:"date"},[i])]),l=n("div",{slot:"title",class:"title"},[n("div",[e.userName])]),c=n("div",{slot:"root-end",class:"summary"},[this._timeline_getHandleRemark({task:e})]),u=n("div",{slot:"after",class:"after"},[this._timeline_renderFlowTaskActions({task:e})]);return n("eb-list-item",{class:o,key:"flowTask:".concat(e.flowTaskId),ref:"flowTask:".concat(e.flowTaskId)},[r,s,l,c,u])},_timeline_renderTasks:function(){var t,e=[],n=this.base_tasksGroup,a=n.length,o=b(n);try{for(o.s();!(t=o.n()).done;){var r=t.value;e.push(this._timeline_renderFlowNode({task:r,flowNodeGroupIndex:a})),a--}}catch(t){o.e(t)}finally{o.f()}return e},timeline_render:function(){return(0,this.$createElement)("div",{class:"eb-flow-timeline"},[this._timeline_renderTasks()])}}};var k=n(957),w=n(801);const _={components:{actionCancelFlow:k.Z,actionHandleTask:w.Z},data:function(){return{}},methods:{actions_renderActionComponents:function(){var t=this.$createElement,e=[];return e.push(t(k.Z,{key:"actionCancelFlow",ref:"actionCancelFlow"})),e.push(t(w.Z,{key:"actionHandleTask",ref:"actionHandleTask"})),e}}};function x(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}const C={data:function(){return{notification:{simple:null,callbackId:0}}},created:function(){var t=this;this.$meta.util.performAction({ctx:this,action:{actionModule:"a-message",actionComponent:"uniform",name:"initialize"}}).then((function(e){t.notification.simple=e,t.notification.callbackId=t.notification.simple.register("a-flow:workflow",t.notification_callback.bind(t))}))},beforeDestroy:function(){this.notification.callbackId&&(this.notification.simple.unRegister(this.notification.callbackId),this.notification.callbackId=0)},methods:{notification_callback:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.scene,t.message,o=t.content,"click"!==a){e.next=6;break}if((n.base_flow&&n.base_flow.flowId)!==o.params.flowId){e.next=6;break}return n.base_loadData(),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function i(t){x(r,a,o,i,s,"next",t)}function s(t){x(r,a,o,i,s,"throw",t)}i(void 0)}))})()}}},A={mixins:[{mixins:[o().prototype.$meta.module.get("a-base").options.mixins.ebAtomActions,u,{data:function(){return{}},methods:{page_getTitle:function(){var t=this.$text("FlowTitle");return this.base_ready?"".concat(t,": ").concat(this.base.data.flow.flowName):t},page_getSubtitle:function(){return null}}},m,{data:function(){return{subnavbar:{enable:!1}}},methods:{}},p,v,_,C],data:function(){return{}},created:function(){var t=this;this.base_loadData().then((function(e){e&&t.layout_prepareConfig().then((function(){t.base.ready=!0}))}))},beforeDestroy:function(){this.layout.instance=null,this.$emit("layoutManager:destroy")}}],data:function(){var t=this.$f7route.query;return{container:{flowId:parseInt(t.flowId||0),flowTaskId:parseInt(t.flowTaskId||0),layout:t.layout}}},render:function(){var t=arguments[0];return t("eb-page",{attrs:{withSubnavbar:this.subnavbar.enable}},[t("eb-navbar",{attrs:{title:this.page_getTitle(),subtitle:this.page_getSubtitle(),"eb-back-link":"Back"}},[this.layout_renderBlock({blockName:"title"}),this.layout.instance&&this.subnavbar.enable&&this.layout_renderBlock({blockName:"subnavbar"})]),this.layout_renderLayout()])}}},383:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});const a={mixins:[n(609).Z],data:function(){var t=this.$f7route.query;return{container:{options:t&&t.options?JSON.parse(t.options):{mode:"history"},layout:t&&t.layout}}},render:function(){var t=arguments[0];return t("eb-page",{attrs:{ptr:!0,infinite:!0,infinitePreloader:!1},on:{ptrRefresh:this.page_onRefresh,infinite:this.page_onInfinite}},[t("eb-navbar",{attrs:{title:this.page_getTitle(),subtitle:this.page_getSubtitle(),"eb-back-link":"Back"}},[this.layout_renderBlock({blockName:"title"})]),this.layout_renderLayout()])}}},970:(t,e,n)=>{"use strict";function a(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}n.r(e),n.d(e,{default:()=>f});const o={data:function(){return{layout:{current:null,config:null,instance:null}}},created:function(){this.layout.current=this.container.layout||this.layout_get()},methods:{layout_get:function(){return"large"===this.$view.size?"pc":"mobile"},layout_prepareConfig:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.base.configAtomBase=e.$meta.config.modules["a-flowtask"].flowTask,!(n=e.base_atomClass)){t.next=6;break}return t.next=5,e.$meta.module.use(n.module);case 5:e.base.configAtom=e.$meta.util.getProperty(e.$meta.config.modules[n.module],"flowTasks.".concat(n.atomClassName));case 6:e.base.config=e.base.configAtom?e.$meta.util.extend({},e.base.configAtomBase,e.base.configAtom):e.base.configAtomBase,(a=e.$meta.util.getProperty(e.base.config,"render.atom.layouts.".concat(e.layout.current)))||(a=e.$meta.util.getProperty(e.base.config,"render.atom.layouts.mobile")),e.layout.config=a;case 10:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function s(t){a(i,o,r,s,l,"next",t)}function l(t){a(i,o,r,s,l,"throw",t)}s(void 0)}))})()},layout_getComponentOptions:function(){return{props:{layoutManager:this,layoutConfig:this.layout.config}}},layout_renderComponent:function(){var t=this.$createElement;return this.base.ready?t("eb-component",{attrs:{module:this.layout.config.component.module,name:this.layout.config.component.name,options:this.layout_getComponentOptions()}}):null},layout_getBlockComponentOptions:function(t){return{props:{layoutManager:this,blockConfig:t.blockConfig}}},layout_renderBlock:function(t){var e=t.blockName,n=this.$createElement;if(!this.base.ready)return null;var a=this.layout.config.blocks[e];return a?n("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:this.layout_getBlockComponentOptions({blockConfig:a})}}):null},layout_renderLayout:function(){return(0,this.$createElement)("div",[this.layout_renderComponent()])}}};var r=n(957),i=n(801);function s(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function i(t){s(r,a,o,i,l,"next",t)}function l(t){s(r,a,o,i,l,"throw",t)}i(void 0)}))}}const c={mixins:[{data:function(){return{base:{ready:!1,configAtomBase:null,configAtom:null,config:null}}},computed:{base_ready:function(){return this.base.ready},base_user:function(){return this.$store.state.auth.user.op},base_flow:function(){return this.container_flowLayoutManager.base_flow},base_atom:function(){return this.container_flowLayoutManager.base_atom},base_flowOld:function(){return this.container_flowLayoutManager.base_flowOld},base_atomClass:function(){return this.container_flowLayoutManager.base_atomClass}},created:function(){},methods:{}},{data:function(){return{}},methods:{page_getTitle:function(){return this.base_ready?"".concat(this.$text("Task"),": ").concat(this.base_flow.flowName):""},page_getSubtitle:function(){return null}}},o,{data:function(){return{}},methods:{}},{data:function(){return{}},methods:{validate_getInstance:function(){return this.$refs.validate},validate_onSubmit:function(){this.actions_onSubmit()},validate_onPerformValidate:function(t,e){return this.actions_onPerformValidate(t,e)},validate_render:function(){var t=this.$createElement;if(!this.base_ready)return null;var e={mode:this.container.mode,atomId:this.container_data.item.atomId,flowTaskId:this.container.flowTaskId},n={schema:this.container_data.schema};return t("eb-validate",{ref:"validate",attrs:{host:e,readOnly:"edit"!==this.container.mode,auto:!0,data:this.container_data.item,meta:n},props:{onPerform:this.validate_onPerformValidate},on:{submit:this.validate_onSubmit}})}}},{components:{actionCancelFlow:r.Z,actionHandleTask:i.Z},data:function(){return{}},methods:{actions_onSubmit:function(){this.$refs.buttonSave.onClick()},actions_onPerformValidate:function(t,e){var n=this;return l(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.handle,n.$refs.actionHandleTask.init({flowLayoutManager:n.container_flowLayoutManager,flowTaskId:n.container.flowTaskId,action:n.container_action}),o=n.container_data.item,t.next=5,n.$refs.actionHandleTask._submit({handle:a,formAtom:o});case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))()},actions_onPerformTaskHandleSave:function(){var t=this;return l(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.validate_getInstance()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,n.perform(null,{action:"save"});case 5:return e.abrupt("return",t.$text("Saved"));case 6:case"end":return e.stop()}}),e)})))()},actions_onPerformTaskHandleSubmit:function(){var t,e=this;this.$refs.actionHandleTask.open({flowLayoutManager:this.container_flowLayoutManager,flowTaskId:this.container.flowTaskId,action:this.container_action,callback:(t=l(regeneratorRuntime.mark((function t(n){var a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.handle,o=e.validate_getInstance()){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,o.perform(null,{action:"submit",handle:a});case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})})},actions_renderActionComponents:function(){var t=this.$createElement,e=[];return e.push(t(r.Z,{key:"actionCancelFlow",ref:"actionCancelFlow"})),e.push(t(i.Z,{key:"actionHandleTask",ref:"actionHandleTask"})),e},actions_renderHandle:function(){var t=this,e=this.$createElement,n=[];return n.push(e("eb-link",{key:"save",ref:"buttonSave",attrs:{iconMaterial:"save"},props:{onPerform:function(e){return t.actions_onPerformTaskHandleSave(e)}}})),n.push(e("eb-link",{key:"submit",ref:"buttonSubmit",attrs:{iconMaterial:"done"},props:{onPerform:function(e){return t.actions_onPerformTaskHandleSubmit(e)}}})),n},actions_render:function(){return this.base_ready?"view"===this.container.mode?this.container_flowLayoutManager._timeline_renderFlowTaskActionsChildren({task:this.container_task,enableView:!1,ctxParent:this}):this.actions_renderHandle():null}}}],data:function(){return{}},computed:{container_flowLayoutManager:function(){return this.contextParams.flowLayoutManager},container_task:function(){return this.contextParams.task},container_data:function(){return this.contextParams.data},container_action:function(){return this.contextParams.action}},created:function(){var t=this;this.layout_prepareConfig().then((function(){t.base.ready=!0}))},beforeDestroy:function(){this.layout.instance=null,this.$emit("layoutManager:destroy")}};var u=n(5);const f={mixins:[n.n(u)().prototype.$meta.module.get("a-components").options.mixins.ebPageContext,c],data:function(){var t=this.$f7route.query;return{container:{flowTaskId:parseInt(t.flowTaskId||0),mode:t.mode,layout:t.layout}}},render:function(){var t=arguments[0];return t("eb-page",[t("eb-navbar",{attrs:{title:this.page_getTitle(),subtitle:this.page_getSubtitle(),"eb-back-link":"Back"}},[this.layout_renderBlock({blockName:"title"})]),this.layout_renderLayout()])}}},506:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});const a={mixins:[n(46).Z],data:function(){var t=this.$f7route.query;return{container:{options:t&&t.options?JSON.parse(t.options):{mode:"history"},layout:t&&t.layout}}},render:function(){var t=arguments[0];return t("eb-page",{attrs:{ptr:!0,infinite:!0,infinitePreloader:!1},on:{ptrRefresh:this.page_onRefresh,infinite:this.page_onInfinite}},[t("eb-navbar",{attrs:{title:this.page_getTitle(),subtitle:this.page_getSubtitle(),"eb-back-link":"Back"}},[this.layout_renderBlock({blockName:"title"})]),this.layout_renderLayout()])}}},891:(t,e,n)=>{var a=n(233),o=n(361)(a);o.push([t.id,":root .navbar .eb-flowStatus.badge {\n  margin: 0 16px;\n}\n:root .eb-flow-timeline .task-actions {\n  display: flex;\n  align-items: center;\n}\n:root .eb-flow-timeline .task-actions .link {\n  margin-left: 6px;\n}\n:root .eb-flow-timeline .flowRemark.badge {\n  margin: 0 16px;\n}\n:root .eb-flow-timeline .flowNodeIndex.badge {\n  margin-top: -3px;\n  margin-right: 6px;\n}\n:root .eb-flow-timeline .flowTaskCurrent {\n  background: var(--f7-list-item-divider-bg-color);\n}\n","",{version:3,sources:["webpack://./front/src/assets/css/module.less"],names:[],mappings:"AAAA;EAIM,cAAA;AAFN;AAFA;EAWM,aAAA;EACA,mBAAA;AANN;AANA;EAiBQ,gBAAA;AARR;AATA;EAsBM,cAAA;AAVN;AAZA;EA0BM,gBAAA;EACA,iBAAA;AAXN;AAhBA;EA+BM,gDAAA;AAZN",sourcesContent:[":root {\n\n  .navbar {\n    .eb-flowStatus.badge {\n      margin: 0 16px;\n    }\n  }\n\n  .eb-flow-timeline {\n\n    .task-actions {\n      display: flex;\n      align-items: center;\n    }\n\n    .task-actions {\n      .link {\n        margin-left: 6px;\n      }\n    }\n\n    .flowRemark.badge {\n      margin: 0 16px;\n    }\n\n    .flowNodeIndex.badge {\n      margin-top: -3px;\n      margin-right: 6px;\n    }\n\n    .flowTaskCurrent {\n      background: var(--f7-list-item-divider-bg-color);\n    }\n\n  }\n}\n"],sourceRoot:""}]),t.exports=o},361:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,a){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(a)for(var r=0;r<this.length;r++){var i=this[r][0];null!=i&&(o[i]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);a&&o[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},233:t=>{"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}t.exports=function(t){var n,a,o=(a=4,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],a=!0,o=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){o=!0,r=t}finally{try{a||null==s.return||s.return()}finally{if(o)throw r}}return n}}(n,a)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?e(t,n):void 0}}(n,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=o[1],i=o[3];if("function"==typeof btoa){var s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),c="/*# ".concat(l," */"),u=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[r].concat(u).concat([c]).join("\n")}return[r].join("\n")}},887:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(5),o=n.n(a);const r={components:{flowTab:n(119).Z},data:function(){var t=this.$f7route.query,e=t&&t.options?JSON.parse(t.options):{mode:"mine"};return{options:e,layout:t&&t.layout,stats:{mine:0},tabId:{mine:o().prototype.$meta.util.nextId("tab"),others:o().prototype.$meta.util.nextId("tab"),history:o().prototype.$meta.util.nextId("tab")},tabName:e.mode}},computed:{pageTitle:function(){var t=this.tabName;return"mine"===t?"".concat(this.$text("Initiateds")):"others"===t?"".concat(this.$text("Participateds")):"history"===t?"".concat(this.$text("Ends")):this.$text("Flow")}},created:function(){},methods:{getContainer:function(t){var e={mode:t};return"history"===t&&(e.where={"a.flowStatus":1}),{options:e,layout:this.layout}},onStatsChange:function(t,e){this.stats[e]=t}}},i=(0,n(792).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",{attrs:{"page-content":!1,tabs:"","with-subnavbar":""}},[n("eb-navbar",{attrs:{title:t.pageTitle,"eb-back-link":"Back"}},[n("f7-subnavbar",[n("f7-toolbar",{attrs:{top:"",tabbar:""}},[n("eb-link",{attrs:{"tab-link":"#"+t.tabId.mine,tabLinkActive:"mine"===t.tabName,"icon-only":"","icon-material":"person","badge-color":"orange","icon-badge":t.stats.mine,stats_params:{module:"a-flow",name:"flowInitiateds"}},on:{stats_change:function(e){return t.onStatsChange(e,"mine")}}}),t._v(" "),n("eb-link",{attrs:{"tab-link":"#"+t.tabId.others,tabLinkActive:"others"===t.tabName,"icon-only":"","icon-material":"people"}}),t._v(" "),n("eb-link",{attrs:{"tab-link":"#"+t.tabId.history,tabLinkActive:"history"===t.tabName,"icon-only":"","icon-material":"stop"}})],1)],1)],1),t._v(" "),n("f7-tabs",{ref:"tabs"},[n("eb-tab-page-content",{attrs:{id:t.tabId.mine,tabActive:"mine"===t.tabName,"data-ref":"mine"},on:{"tab:show":function(e){t.tabName="mine"}}},[n("flowTab",{ref:"mine",attrs:{slot:"list",container:t.getContainer("mine")},slot:"list"})],1),t._v(" "),n("eb-tab-page-content",{attrs:{id:t.tabId.others,tabActive:"others"===t.tabName,"data-ref":"others"},on:{"tab:show":function(e){t.tabName="others"}}},[n("flowTab",{ref:"others",attrs:{slot:"list",container:t.getContainer("others")},slot:"list"})],1),t._v(" "),n("eb-tab-page-content",{attrs:{id:t.tabId.history,tabActive:"history"===t.tabName,"data-ref":"history"},on:{"tab:show":function(e){t.tabName="history"}}},[n("flowTab",{ref:"history",attrs:{slot:"list",container:t.getContainer("history")},slot:"list"})],1)],1)],1)}),[],!1,null,null,null).exports},414:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(5),o=n.n(a);const r={components:{flowTaskTab:n(862).Z},data:function(){var t=this.$f7route.query,e=t&&t.options?JSON.parse(t.options):{mode:"claimings"};return{options:e,layout:t&&t.layout,stats:{claimings:0,handlings:0},tabId:{claimings:o().prototype.$meta.util.nextId("tab"),handlings:o().prototype.$meta.util.nextId("tab"),completeds:o().prototype.$meta.util.nextId("tab")},tabName:e.mode}},computed:{pageTitle:function(){var t=this.tabName;return"claimings"===t?"".concat(this.$text("Claimings")):"handlings"===t?"".concat(this.$text("Handlings")):"completeds"===t?"".concat(this.$text("Completeds")):this.$text("Task")}},created:function(){},methods:{getContainer:function(t){return{options:{mode:t},layout:this.layout}},onStatsChange:function(t,e){this.stats[e]=t}}},i=(0,n(792).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",{attrs:{"page-content":!1,tabs:"","with-subnavbar":""}},[n("eb-navbar",{attrs:{title:t.pageTitle,"eb-back-link":"Back"}},[n("f7-subnavbar",[n("f7-toolbar",{attrs:{top:"",tabbar:""}},[n("eb-link",{attrs:{"tab-link":"#"+t.tabId.claimings,tabLinkActive:"claimings"===t.tabName,"icon-only":"","icon-material":"play_arrow","badge-color":"red","icon-badge":t.stats.claimings,stats_params:{module:"a-flowtask",name:"taskClaimings"}},on:{stats_change:function(e){return t.onStatsChange(e,"claimings")}}}),t._v(" "),n("eb-link",{attrs:{"tab-link":"#"+t.tabId.handlings,tabLinkActive:"handlings"===t.tabName,"icon-only":"","icon-material":"fast_forward","badge-color":"red","icon-badge":t.stats.handlings,stats_params:{module:"a-flowtask",name:"taskHandlings"}},on:{stats_change:function(e){return t.onStatsChange(e,"handlings")}}}),t._v(" "),n("eb-link",{attrs:{"tab-link":"#"+t.tabId.completeds,tabLinkActive:"completeds"===t.tabName,"icon-only":"","icon-material":"stop"}})],1)],1)],1),t._v(" "),n("f7-tabs",{ref:"tabs"},[n("eb-tab-page-content",{attrs:{id:t.tabId.claimings,tabActive:"claimings"===t.tabName,"data-ref":"claimings"},on:{"tab:show":function(e){t.tabName="claimings"}}},[n("flowTaskTab",{ref:"claimings",attrs:{slot:"list",container:t.getContainer("claimings")},slot:"list"})],1),t._v(" "),n("eb-tab-page-content",{attrs:{id:t.tabId.handlings,tabActive:"handlings"===t.tabName,"data-ref":"handlings"},on:{"tab:show":function(e){t.tabName="handlings"}}},[n("flowTaskTab",{ref:"handlings",attrs:{slot:"list",container:t.getContainer("handlings")},slot:"list"})],1),t._v(" "),n("eb-tab-page-content",{attrs:{id:t.tabId.completeds,tabActive:"completeds"===t.tabName,"data-ref":"completeds"},on:{"tab:show":function(e){t.tabName="completeds"}}},[n("flowTaskTab",{ref:"completeds",attrs:{slot:"list",container:t.getContainer("completeds")},slot:"list"})],1)],1)],1)}),[],!1,null,null,null).exports},792:(t,e,n)=>{"use strict";function a(t,e,n,a,o,r,i,s){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),a&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),i?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=l):o&&(l=s?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,l):[l]}return{exports:t,options:c}}n.d(e,{Z:()=>a})},824:(t,e,n)=>{var a=n(891);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,n(159).Z)("1844f982",a,!0,{})},159:(t,e,n)=>{"use strict";function a(t,e){for(var n=[],a={},o=0;o<e.length;o++){var r=e[o],i=r[0],s={id:t+":"+o,css:r[1],media:r[2],sourceMap:r[3]};a[i]?a[i].parts.push(s):n.push(a[i]={id:i,parts:[s]})}return n}n.d(e,{Z:()=>h});var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r={},i=o&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,c=!1,u=function(){},f=null,m="data-vue-ssr-id",d="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(t,e,n,o){c=n,f=o||{};var i=a(t,e);return p(i),function(e){for(var n=[],o=0;o<i.length;o++){var s=i[o];(l=r[s.id]).refs--,n.push(l)}for(e?p(i=a(t,e)):i=[],o=0;o<n.length;o++){var l;if(0===(l=n[o]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete r[l.id]}}}}function p(t){for(var e=0;e<t.length;e++){var n=t[e],a=r[n.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](n.parts[o]);for(;o<n.parts.length;o++)a.parts.push(g(n.parts[o]));a.parts.length>n.parts.length&&(a.parts.length=n.parts.length)}else{var i=[];for(o=0;o<n.parts.length;o++)i.push(g(n.parts[o]));r[n.id]={id:n.id,refs:1,parts:i}}}}function b(){var t=document.createElement("style");return t.type="text/css",i.appendChild(t),t}function g(t){var e,n,a=document.querySelector("style["+m+'~="'+t.id+'"]');if(a){if(c)return u;a.parentNode.removeChild(a)}if(d){var o=l++;a=s||(s=b()),e=k.bind(null,a,o,!1),n=k.bind(null,a,o,!0)}else a=b(),e=w.bind(null,a),n=function(){a.parentNode.removeChild(a)};return e(t),function(a){if(a){if(a.css===t.css&&a.media===t.media&&a.sourceMap===t.sourceMap)return;e(t=a)}else n()}}var y,v=(y=[],function(t,e){return y[t]=e,y.filter(Boolean).join("\n")});function k(t,e,n,a){var o=n?"":a.css;if(t.styleSheet)t.styleSheet.cssText=v(e,o);else{var r=document.createTextNode(o),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(r,i[e]):t.appendChild(r)}}function w(t,e){var n=e.css,a=e.media,o=e.sourceMap;if(a&&t.setAttribute("media",a),f.ssrId&&t.setAttribute(m,e.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},990:(t,e,n)=>{var a={"./assigneesConfirmation.jsx":932,"./flow.jsx":926,"./flowList.jsx":383,"./flowTaskAtom.jsx":970,"./flowTaskList.jsx":506};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}o.keys=function(){return Object.keys(a)},o.resolve=r,t.exports=o,o.id=990},142:(t,e,n)=>{var a={"./flowTabs.vue":887,"./flowTaskTabs.vue":414};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}o.keys=function(){return Object.keys(a)},o.resolve=r,t.exports=o,o.id=142},5:t=>{"use strict";t.exports=window.Vue}},e={};function n(a){var o=e[a];if(void 0!==o)return o.exports;var r=e[a]={id:a,exports:{}};return t[a](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};(()=>{"use strict";var t;n.r(a),n.d(a,{default:()=>e}),n(824);const e={install:function(e,a){return t?console.error("already installed."):(t=e,a({routes:n(644).Z,store:n(81).Z(t),config:n(788).Z,locales:n(137).Z,components:n(971).Z}))}}})(),window["a-flowtask"]=a})();
//# sourceMappingURL=front.js.map