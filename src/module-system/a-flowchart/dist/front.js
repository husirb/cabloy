(()=>{var e={530:(e,t,n)=>{"use strict";function r(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){r(i,o,a,s,c,"next",e)}function c(e){r(i,o,a,s,c,"throw",e)}s(void 0)}))}}n.d(t,{Z:()=>w});const a={meta:{global:!1},methods:{onAction:function(e){var t=this;return o(regeneratorRuntime.mark((function n(){var r,o,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.ctx,o=e.action,a=e.item,"getSchemaReference"!==o.name){n.next=7;break}return n.next=4,t.onAction_getSchemaReference({ctx:r,item:a});case 4:return n.abrupt("return",n.sent);case 7:if("schemaReference"!==o.name){n.next=11;break}return n.next=10,t.onAction_schemaReference({ctx:r,action:o,item:a});case 10:return n.abrupt("return",n.sent);case 11:case"end":return n.stop()}}),n)})))()},onAction_getSchemaReference:function(e){var t=this;return o(regeneratorRuntime.mark((function n(){var r,o,a,i,s,c,u,l,d,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.ctx,o=e.item,a=o.validate,i=a.host.container,s=i.diagram,c=i.id,u=t.__findNode_startEventAtom({diagram:s,nodeId:c})){n.next=9;break}return r.$view.toast.show({text:t.$text("NotFoundStartEventAtom")}),n.abrupt("return");case 9:if((l=u.options&&u.options.atom)&&l.module&&l.atomClassName){n.next=13;break}return r.$view.toast.show({text:t.$text("NotSetStartEventAtom")}),n.abrupt("return");case 13:return n.next=15,r.$api.post("/a/base/atom/validator",{atomClass:l});case 15:return d=n.sent,n.next=18,r.$api.post("/a/validation/validation/schema",{module:d.module,validator:d.validator,schema:null});case 18:return f=n.sent,n.abrupt("return",f);case 20:case"end":return n.stop()}}),n)})))()},onAction_schemaReference:function(e){var t=this;return o(regeneratorRuntime.mark((function n(){var r,o,a,i,s,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.ctx,o=e.action,a=e.item,n.next=3,t.onAction_getSchemaReference({ctx:r,action:o,item:a});case 3:if(i=n.sent){n.next=6;break}return n.abrupt("return");case 6:s=i.schema,void 0===(c=r.$meta.util.getProperty(o,"navigateOptions.target"))&&(c="_self"),r.$view.navigate("/a/basefront/json/editor?t=".concat(Date.now()),{target:c,context:{params:{value:s,title:r.$text("ReferenceForHelp"),readOnly:!0}}});case 10:case"end":return n.stop()}}),n)})))()},__findNode_startEventAtom:function(e){var t=e.diagram,n=e.nodeId,r=t.contentProcess.nodes.find((function(e){return e.id===n}));if(!r)return null;for(var o={};;){if("startEventAtom"===r.type)return r;if(o[n]=!0,!(r=this.__findNode_previous({diagram:t,nodeId:n,nodeIdCaches:o})))return null;n=r.id}},__findNode_previous:function(e){var t=e.diagram,n=e.nodeId,r=e.nodeIdCaches,o=t.contentProcess.edges.find((function(e){return e.target===n&&!r[e.source]}));return o?t.contentProcess.nodes.find((function(e){return e.id===o.source})):null}}},i={props:{context:{type:Object}},data:function(){return{}},computed:{},created:function(){},methods:{onChooseAssignees:function(){var e=this,t=this.context.validate,n=t.host.container,r={flowDefId:n.flowDefId,nodeId:n.id},o=this.$meta.util.combineQueries("/a/flowchart/flowDef/assigneesEdit",r);this.$view.navigate(o,{target:"_self",context:{params:{context:this.context,readOnly:t.readOnly,value:this.context.getValue()},callback:function(t,n){200===t&&e.context.setValue(n)}}})}},render:function(){var e=arguments[0],t=this.context.dataPath,n=this.context.getTitle();return e("eb-list-item-choose",{attrs:{link:"#",dataPath:t,title:n},props:{onChoose:this.onChooseAssignees}})}};var s=n(5);function c(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}const u={mixins:[n.n(s)().prototype.$meta.module.get("a-base").options.mixins.ebModules],props:{context:{type:Object}},data:function(){return{flowServiceBases:null}},computed:{ebOptions:function(){if(!this.modulesAll||!this.flowServiceBases)return[];var e=[];for(var t in this.flowServiceBases){var n=this.modulesAll[t],r=this.flowServiceBases[t],o={title:n.titleLocale,options:[]};for(var a in e.push(o),r){var i=r[a].titleLocale,s="".concat(t,":").concat(a);o.options.push({title:i,value:s})}}return e}},created:function(){this.__init()},methods:{__init:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$local.dispatch("getFlowServiceBases");case 2:t.flowServiceBases=e.sent;case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,s,"next",e)}function s(e){c(a,r,o,i,s,"throw",e)}i(void 0)}))})()}},render:function(){var e=arguments[0],t=this.context,n=t.parcel,r=t.key,o=t.property,a={ebPatch:{getValue:function(e){return e?"".concat(e.module,":").concat(e.name):""},setValue:function(e){if(!e)return null;var t=e.split(":");return t[0]&&t[1]?{module:t[0],name:t[1]}:null}}},i=this.$utils.extend({},o,{ebType:"select",ebOptions:this.ebOptions});return e("eb-list-item-validate",{attrs:{parcel:n,dataKey:r,property:i,meta:a}})}},l={props:{context:{type:Object}},data:function(){return{}},computed:{},created:function(){},methods:{save:function(){return this.context.validate.perform(null,{action:"save"})},onChooseEditContent:function(){var e=this,t=this.context,n=t.parcel,r=t.validate;this.$view.navigate("/a/flowchart/flowDef/contentEdit",{target:r.readOnly?"_self":void 0,context:{params:{ctx:this,item:n.data,readOnly:r.readOnly},callback:function(t,n){200===t&&e.context.setValue(n.content)}}})}},render:function(){var e=arguments[0],t=this.context.dataPath,n=this.context.getTitle();return e("eb-list-item-choose",{attrs:{link:"#",dataPath:t,title:n},props:{onChoose:this.onChooseEditContent}})}},d={props:{context:{type:Object}},data:function(){return{}},computed:{ebOptions:function(){var e=this.context.validate.host.container,t=e.diagram,n=e.id,r=t.contentProcess.nodes.filter((function(e){return e.id!==n&&("startEventAtom"===e.type||"activityUserTask"===e.type)})).map((function(e){return{title:e.nameLocale||e.name,value:e.id}}));return r.unshift({title:"Default",value:""}),r}},created:function(){},methods:{},render:function(){var e=arguments[0],t=this.context,n=t.parcel,r=t.key,o=t.property,a=this.$utils.extend({},o,{ebType:"select",ebOptions:this.ebOptions});return e("eb-list-item-validate",{attrs:{parcel:n,dataKey:r,property:a}})}};function f(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){f(a,r,o,i,s,"next",e)}function s(e){f(a,r,o,i,s,"throw",e)}i(void 0)}))}}const p={props:{context:{type:Object}},data:function(){return{}},computed:{},created:function(){},methods:{getSchemaReference:function(){var e=this;return h(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={name:"getSchemaReference",actionModule:"a-flowchart",actionComponent:"actionUserTask"},t.next=3,e.$meta.util.performAction({ctx:e,action:n,item:e.context});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},onChooseSchemaFields:function(){var e=this;return h(regeneratorRuntime.mark((function t(){var n,r,o,a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getSchemaReference();case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.$meta.module.use(n.module);case 7:r=e.context.validate,o=r.host.container,a={flowDefId:o.flowDefId,nodeId:o.id},i=e.$meta.util.combineQueries("/a/flowchart/flowDef/schemaFields",a),e.$view.navigate(i,{target:"_self",context:{params:{context:e.context,readOnly:r.readOnly,value:e.context.getValue(),schemaReference:n},callback:function(t,n){200===t&&e.context.setValue(n)}}});case 12:case"end":return t.stop()}}),t)})))()}},render:function(){var e=arguments[0],t=this.context.dataPath,n=this.context.getTitle();return e("eb-list-item-choose",{attrs:{link:"#",dataPath:t,title:n},props:{onChoose:this.onChooseSchemaFields}})}},m={props:{context:{type:Object}},data:function(){return{}},computed:{ebOptions:function(){return this.context.validate.host.container.diagram.contentProcess.nodes.map((function(e){return{title:e.nameLocale||e.name,value:e.id}}))}},created:function(){},methods:{},render:function(){var e=arguments[0],t=this.context,n=t.parcel,r=t.key,o=t.property,a=this.$utils.extend({},o,{ebType:"select",ebOptions:this.ebOptions});return e("eb-list-item-validate",{attrs:{parcel:n,dataKey:r,property:a}})}};var v=n(623),g=n(601),y=n(250),b=n(770);const w={actionUserTask:a,renderAssignees:i,renderBeanFlowService:u,renderFlowDefContent:l,renderRejectedNode:d,renderSchemaFields:p,renderSelectNode:m,contentEditDiagram:v.Z,contentEditSource:g.Z,contentEditListener:y.Z,schemaFieldsTab:b.Z}},788:(e,t,n)=>{"use strict";function r(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){r(i,o,a,s,c,"next",e)}function c(e){r(i,o,a,s,c,"throw",e)}s(void 0)}))}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,{Z:()=>i});const i={flowDef:{default:{listener:function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t}var t,n,r,i,s,c,u,l,d,f,h,p;return t=e,(n=[{key:"onFlowStart",value:(p=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return p.apply(this,arguments)})},{key:"onFlowEnd",value:(h=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)})},{key:"onNodeEnter",value:(f=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return f.apply(this,arguments)})},{key:"onNodeBegin",value:(d=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)})},{key:"onNodeDoing",value:(l=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)})},{key:"onNodeEnd",value:(u=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})},{key:"onNodeLeave",value:(c=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})},{key:"onEdgeEnter",value:(s=o(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return s.apply(this,arguments)})},{key:"onEdgeTake",value:(i=o(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)})},{key:"onEdgeLeave",value:(r=o(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})}])&&a(t.prototype,n),e}().toString(),process:{nodes:[],edges:[]}},groups:[{name:"startEvent",title:"Start Event"},{name:"endEvent",title:"End Event"},{name:"activity",title:"Activity"}]},schema:{default:{base:{node:{id:"",name:"",type:""},edge:{id:"",name:"",source:"",target:""}}}}}},933:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={flowDefDiagramTitle:"Diagram",flowDefSourceTitle:"Source",flowDefListenerTitle:"Listener",EditInPCTip:"Please edit in PC",FlowInitiator:"Flow Initiator",NotFoundStartEventAtom:"Not Found: StartEvent of Atom Draft",NotSetStartEventAtom:"Not Set: StartEvent of Atom Draft"}},978:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={flowDefDiagramTitle:"流程图",flowDefSourceTitle:"源文件",flowDefListenerTitle:"监听器",EditInPCTip:"请在PC中编辑",Activity:"活动",Variable:"变量",Variables:"变量",FlowInitiator:"流程发起人",NotFoundStartEventAtom:"未发现：原子起草开始事件",NotSetStartEventAtom:"未设置：原子起草开始事件","Flow Chart":"流程图","Start Event":"开始事件","End Event":"结束事件","Field Permissions":"字段权限","Allow All Fields":"允许所有字段","Disable All Fields":"禁止所有字段","Allow Specific Fields":"允许指定字段","Select Fields":"选择字段","Move Up":"上移","Move Down":"下移"}},137:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={"en-us":n(933).Z,"zh-cn":n(978).Z}},644:(e,t,n)=>{"use strict";function r(e){return n(142)("./".concat(e,".vue")).default}function o(e){return n(990)("./".concat(e,".jsx")).default}n.d(t,{Z:()=>a});const a=[{path:"flowDef/assigneesEdit",component:o("flowDef/assigneesEdit")},{path:"flowDef/contentEdit",component:r("flowDef/contentEdit")},{path:"flowDef/contentProcessView",component:r("flowDef/contentProcessView")},{path:"flowDef/nodes",component:r("flowDef/nodes")},{path:"flowDef/nodeProperties",component:o("flowDef/nodeProperties")},{path:"flowDef/schemaFields",component:r("flowDef/schemaFields")}]},81:(e,t,n)=>{"use strict";function r(e){return{state:{nodeBases:null,edgeBases:null,flowServiceBases:null},getters:{},mutations:{setNodeBases:function(e,t){e.nodeBases=t},setEdgeBases:function(e,t){e.edgeBases=t},setFlowServiceBases:function(e,t){e.flowServiceBases=t}},actions:{getNodeBases:function(t){var n=t.state,r=t.commit;return new Promise((function(t,o){if(n.nodeBases)return t(n.nodeBases);e.prototype.$meta.api.post("/a/flow/flowDef/nodeBases").then((function(e){r("setNodeBases",e=e||{}),t(e)})).catch((function(e){o(e)}))}))},getEdgeBases:function(t){var n=t.state,r=t.commit;return new Promise((function(t,o){if(n.edgeBases)return t(n.edgeBases);e.prototype.$meta.api.post("/a/flow/flowDef/edgeBases").then((function(e){r("setEdgeBases",e=e||{}),t(e)})).catch((function(e){o(e)}))}))},getFlowServiceBases:function(t){var n=t.state,r=t.commit;return new Promise((function(t,o){if(n.flowServiceBases)return t(n.flowServiceBases);e.prototype.$meta.api.post("/a/flow/flowDef/flowServiceBases").then((function(e){r("setFlowServiceBases",e=e||{}),t(e)})).catch((function(e){o(e)}))}))}}}}n.d(t,{Z:()=>r})},623:(e,t,n)=>{"use strict";function r(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){r(i,o,a,s,c,"next",e)}function c(e){r(i,o,a,s,c,"throw",e)}s(void 0)}))}}function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:()=>s});const s={meta:{global:!1},props:{viewOnly:{type:Boolean,default:!1},readOnly:{type:Boolean},contentProcessStr:{type:String},tabActive:{type:Boolean},flowDefId:{type:Number},flowNodeDefIds:{type:Array}},data:function(){return{contentProcess:null,nodeBases:null,edgeBases:null,x6:null,xlayout:null,graph:null,dagreLayout:null,size:{height:0,width:0},dirty:!1}},computed:{ready:function(){return this.x6&&this.xlayout&&this.nodeBases&&this.edgeBases},contentProcessRender:function(){if(this.contentProcess){var e,t=[],n=a(this.contentProcess.nodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,o=this.__createNode(r);t.push(o)}}catch(e){n.e(e)}finally{n.f()}var i,s=[],c=a(this.contentProcess.edges);try{for(c.s();!(i=c.n()).done;){var u=i.value,l=this.__createEdge(u);s.push(l)}}catch(e){c.e(e)}finally{c.f()}return{nodes:t,edges:s}}}},watch:{contentProcessStr:function(){this.contentProcess=window.JSON5.parse(this.contentProcessStr),this.tabActive?this.__updateChart({changeData:!0}):this.dirty=!0},tabActive:function(){this.tabActive&&this.dirty&&(this.dirty=!1,this.__updateChart({changeData:!0}))}},created:function(){},mounted:function(){this.__init()},beforeDestroy:function(){this.graph&&(this.graph.dispose(),this.graph=null),this.dagreLayout&&(this.dagreLayout.destroy(),this.dagreLayout=null),this.$emit("diagram:destroy")},methods:{__init:function(){var e=this;return o(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.contentProcess=window.JSON5.parse(e.contentProcessStr),t.next=3,e.$local.dispatch("getNodeBases");case 3:return e.nodeBases=t.sent,t.next=6,e.$local.dispatch("getEdgeBases");case 6:return e.edgeBases=t.sent,t.next=9,e.__prepareInstances();case 9:e.__registerNodes(),e.__registerEdges(),e.__updateChart({});case 12:case"end":return t.stop()}}),t)})))()},__prepareInstances:function(){var e=this;return o(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={actionModule:"a-antvx6",actionComponent:"x6",name:"instance"},(n=[]).push(e.__prepareInstance({action:r})),r={actionModule:"a-antvlayout",actionComponent:"layout",name:"instance"},n.push(e.__prepareInstance({action:r})),t.next=7,Promise.all(n);case 7:o=t.sent,e.x6=o[0],e.xlayout=o[1];case 10:case"end":return t.stop()}}),t)})))()},__prepareInstance:function(e){var t=this;return o(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.action,n.next=3,t.$meta.util.performAction({ctx:t,action:r});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},__updateChart:function(e){var t=e.changeSize,n=e.changeData;if(this.ready&&(this.graph||this.__createChart(),t&&(this.graph.resize(this.size.width,this.size.height),this.graph.centerContent()),n)){var r=this.__createLayoutModel();this.graph.fromJSON(r),this.graph.centerContent()}},__createChart:function(){var e=this,t=this.$refs.container;this.graph=new this.x6.Graph({container:t,width:this.size.width,height:this.size.height,background:{color:"#FFFFFF"},selecting:{enabled:!this.readOnly,multiple:!1,rubberband:!1,showNodeSelectionBox:!0,showEdgeSelectionBox:!0},scroller:{enabled:!0,pannable:!0,autoResize:!0},mousewheel:{enabled:!0,modifiers:["ctrl","meta"]},connecting:{snap:!0,allowBlank:!1,allowMulti:!1,allowLoop:!1,allowNode:!0,allowEdge:!1,allowPort:!1,highlight:!1,router:{name:"manhattan"},createEdge:function(){return new e.x6.Shape.Edge({attrs:{line:{stroke:"#000",opacity:.4}}})}},interacting:function(){return!this.readOnly&&{nodeMovable:!0,magnetConnectable:!0,edgeMovable:!0,edgeLabelMovable:!1,arrowheadMovable:!0,vertexMovable:!1,vertexAddable:!1,vertexDeletable:!1}}}),this.__graphEvents(t);var n=this.__createLayoutModel();this.graph.fromJSON(n),this.graph.centerContent()},__graphEvents:function(e){var t=this;this.viewOnly||(this.graph.on("edge:connected",(function(e){var n=e.isNew,r=e.edge;if(n){var o=r.getSourceCell(),a=r.getTargetCell();t.addEdge(o.id,a.id)}})),this.graph.on("node:click",(function(e){var n=e.node;t.showProperties({node:n})})),this.graph.on("edge:click",(function(e){var n=e.edge;t.showProperties({edge:n})})))},__createLayoutModel:function(){return this.dagreLayout||(this.dagreLayout=new this.xlayout.DagreLayout({type:"dagre",rankdir:this.size.width<this.size.height?"TB":"LR",align:void 0,nodesep:30,ranksep:50,controlPoints:!0})),this.dagreLayout.layout(this.contentProcessRender)},__createNode:function(e){var t=this.nodeBases[e.type],n=this.$meta.util.combineFetchStaticPath(t.icon),r=this.$meta.util.escapeURL(n),o='<div class="eb-flowchart-node-icons">\n                      <img src="'.concat(r,'" />\n                    </div>'),a=this.$meta.util.escapeHtml(e.nameLocale||e.name),i='<div class="eb-flowchart-node-label">\n                      <span>'.concat(a,"</span>\n                    </div>"),s={id:e.id,shape:"eb-flowchart-node",attrs:{icons:{html:o},label:{html:i}}};return this.flowNodeDefIds&&this.flowNodeDefIds.indexOf(e.id)>-1&&(s.attrs.body={stroke:"orange",strokeWidth:4}),s},__createEdge:function(e){return{id:e.id,shape:"sequence",source:e.source,target:e.target,label:e.nameLocale||e.name}},__registerEdges:function(){for(var e in this.edgeBases){var t=this.edgeBases[e],n=this.__registerEdge(t);this.x6.Graph.registerEdge(e,n,!0)}},__registerNodes:function(){var e=this.__registerNode();this.x6.Graph.registerNode("eb-flowchart-node",e,!0)},__registerEdge:function(e){return{inherit:"edge",attrs:{line:{stroke:"#333333"}}}},__registerNode:function(){return{width:120,height:80,markup:[{tagName:"rect",selector:"body"},{tagName:"foreignObject",selector:"icons"},{tagName:"foreignObject",selector:"label"}],attrs:{body:{fill:"#ffffff",stroke:"#333333",strokeWidth:1,rx:6,ry:6,refWidth:"100%",refHeight:"100%",pointerEvents:"visiblePainted"},icons:{refWidth:"100%",height:32,pointerEvents:"visiblePainted",magnet:!this.readOnly},label:{y:24,refWidth:"100%"}}}},onSize:function(e){this.size.height=e.height,this.size.width=e.width,this.__updateChart({changeSize:!0})},onPerformPlus:function(){this.$view.navigate("/a/flowchart/flowDef/nodes?flowDefId=".concat(this.flowDefId),{scene:"sidebar",sceneOptions:{side:"right",name:"flowChart",title:"Flow Chart"},context:{params:{diagram:this}}})},__findNode:function(e){return this.contentProcess.nodes.find((function(t){return t.id===e}))},__findEdge:function(e){return this.contentProcess.edges.find((function(t){return t.id===e}))},showProperties:function(e){var t=e.node,n=e.edge,r={flowDefId:this.flowDefId,type:t?"node":"edge",id:t?t.id:n.id},o=this.$meta.util.combineQueries("/a/flowchart/flowDef/nodeProperties",r);this.$view.navigate(o,{scene:"sidebar",sceneOptions:{side:"right",name:"properties",title:"Properties"},context:{params:{diagram:this}}})},addEdge:function(e,t){var n={id:this.__getAvailableId(null),source:e,target:t},r=this.$meta.util.extend({},this.contentProcess);r.edges.push(n),this.$emit("contentChange",{type:"process",value:r})},addNode:function(e){var t={id:this.__getAvailableId(e),name:e.titleLocale||e.title,type:e.type},n=this.$meta.util.extend({},this.contentProcess);n.nodes.push(t),this.$emit("contentChange",{type:"process",value:n})},deleteNode:function(e){var t,n=this.$meta.util.extend({},this.contentProcess),r=n.edges.filter((function(t){return t.target===e})),o=n.edges.filter((function(t){return t.source===e})),i=a(r.concat(o));try{var s=function(){var e=t.value,r=n.edges.findIndex((function(t){return t.id===e.id}));r>-1&&n.edges.splice(r,1)};for(i.s();!(t=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}var c=n.nodes.findIndex((function(t){return t.id===e}));c>-1&&n.nodes.splice(c,1),this.$emit("contentChange",{type:"process",value:n})},deleteEdge:function(e){var t=this.$meta.util.extend({},this.contentProcess),n=t.edges.findIndex((function(t){return t.id===e}));n>-1&&t.edges.splice(n,1),this.$emit("contentChange",{type:"process",value:t})},__dataChange:function(e,t,n){var r=this.$meta.util.extend({},this.contentProcess);if("node"===e){var o=r.nodes.findIndex((function(e){return e.id===t}));r.nodes.splice(o,1,n)}else{var a=r.edges.findIndex((function(e){return e.id===t}));r.edges.splice(a,1,n)}this.$emit("contentChange",{type:"process",value:r})},__getAvailableId:function(e){var t,n=0,r=a(e?this.contentProcess.nodes:this.contentProcess.edges);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(o.id){var i=parseInt(o.id.split("_")[1]||0);i>n&&(n=i)}}}catch(e){r.e(e)}finally{r.f()}return e?"".concat(e.type,"_").concat(n+1):"edge_".concat(n+1)},renderActions:function(){var e=this,t=this.$createElement;if(this.readOnly)return null;var n=[];return n.push(t("eb-link",{key:"diagram-action-plus",class:"diagram-action-plus",attrs:{iconMaterial:"add_circle"},props:{onPerform:function(t){return e.onPerformPlus(t)}}})),t("div",{class:"diagram-actions"},[n])}},render:function(){var e,t=arguments[0];return this.ready&&(e=this.renderActions()),t("div",[t("eb-box",{ref:"box",on:{size:this.onSize},attrs:{header:!0,subnavbar:!0},class:"eb-box-iframe"},[t("div",{ref:"container"})]),e])}}},250:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(5);const o={meta:{global:!1},props:{readOnly:{type:Boolean},contentListener:{type:String}},data:function(){return{}},created:function(){},methods:{onSize:function(e){this.$$(this.$refs.textarea).css({height:"".concat(e.height-20,"px"),width:"".concat(e.width-20,"px")})},onInput:function(e){this._onInputDelay(e.target.value)},_onInputDelay:n.n(r)().prototype.$meta.util.debounce((function(e){try{this.$emit("contentChange",{type:"listener",value:e})}catch(e){this.$view.toast.show({text:e.message})}}),500)},render:function(){var e=arguments[0];return e("eb-box",{on:{size:this.onSize},attrs:{header:!0,subnavbar:!0}},[e("textarea",{ref:"textarea",attrs:{readonly:!!this.readOnly&&"readonly",type:"textarea"},domProps:{value:this.contentListener},on:{input:this.onInput},class:"json-textarea json-textarea-margin"})])}}},601:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={meta:{global:!1},props:{readOnly:{type:Boolean},contentProcessStr:{type:String}},data:function(){return{}},created:function(){},methods:{onSize:function(e){this.$$(this.$refs.textarea).css({height:"".concat(e.height-20,"px"),width:"".concat(e.width-20,"px")})},onInput:function(e){var t=e.target.value;try{var n=window.JSON5.parse(t);this.$emit("contentChange",{type:"process",value:n,valueStr:t})}catch(e){this.$view.toast.show({text:e.message})}}},render:function(){var e=arguments[0];return e("eb-box",{on:{size:this.onSize},attrs:{header:!0,subnavbar:!0}},[e("textarea",{ref:"textarea",attrs:{readonly:!!this.readOnly&&"readonly",type:"textarea"},domProps:{value:this.contentProcessStr},on:{input:this.onInput},class:"json-textarea json-textarea-margin"})])}}},770:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(5);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}const i={meta:{global:!1},props:{context:{type:Object},readOnly:{type:Boolean},mode:{type:String},valueSchema:{type:Object},schemaReference:{type:Object}},data:function(){return{valueMode:0,valueModes:[{title:"Allow All Fields",value:1},{title:"Disable All Fields",value:2},{title:"Allow Specific Fields",value:3},{title:"Custom",value:4}],valueMode4:null}},computed:{mode3SelectValue:function(){return 3!==this.valueMode?null:this.valueSchema[this.mode].map((function(e){return e&&"object"===a(e)?e.name:e}))},mode3Items:function(){var e=this;if(3!==this.valueMode)return null;var t=this.valueSchema[this.mode],n=this.schemaReference.schema.properties;return t.map((function(t){var r=t&&"object"===a(t),o=r?t.name:t,i=n[o];return{key:o,title:r&&t.property.ebTitle?e.__getPropertyTitle({key:o,property:t.property}):i?e.__getPropertyTitle({key:o,property:i}):o,icon:r&&t.property.ebType?"group-flatten"===t.property.ebType||"group"===t.property.ebType?"menu":"radio_button_unchecked":!i||"group-flatten"!==i.ebType&&"group"!==i.ebType?"radio_button_unchecked":"menu"}}))},mode3SelectOptions:function(){var e=[],t=this.schemaReference.schema.properties;for(var n in t){var r=t[n],o=this.__getPropertyTitle({key:n,property:r});e.push({title:o,value:n})}return e}},created:function(){this.__init()},methods:{__init:function(){this.__init_valueMode()},__init_valueMode:function(){var e=this.valueSchema[this.mode];e?!0===e?this.valueMode=1:Array.isArray(e)?this.valueMode=3:(this.valueMode=4,this.valueMode4=window.JSON5.stringify(e,null,2)):this.valueMode=2},onInputMode:function(e){e=parseInt(e),this.valueMode=e;var t,n=this.valueSchema[this.mode];1===e?t=!0:2===e?t=!1:3===e?Array.isArray(n)||(t=[]):4===e&&(this.valueMode4=window.JSON5.stringify(n,null,2)),void 0!==t&&(this.valueSchema[this.mode]=t)},__getPropertyTitle:function(e){var t=e.key,n=e.property,r=n.ebTitle?this.$text(n.ebTitle):t;return"group-flatten"===n.ebType||"group"===n.ebType?"-- ".concat(r," --"):r},__findProperty:function(e){var t=e.key,n=this.valueSchema[this.mode],r=n.findIndex((function(e){return e===t||e&&e.name===t}));return[r,-1===r?null:n[r]]},onInputMode3:function(e){var t,n,r=this.valueSchema[this.mode],a=this.schemaReference.schema.properties;for(var i in a){var s=e.indexOf(i),c=(t=this.__findProperty({key:i}),n=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];s>-1&&-1===c?r.push(i):-1===s&&c>-1&&r.splice(c,1)}},onPerformRemoveMode3:function(e,t,n){this.valueSchema[this.mode].splice(n,1),this.$meta.util.swipeoutClose(e.target)},onPerformMoveUpMode3:function(e,t,n){var r=this.valueSchema[this.mode];if(n>0){var o=r.splice(n,1);r.splice(n-1,0,o[0])}this.$meta.util.swipeoutClose(e.target)},onPerformMoveDownMode3:function(e,t,n){var r=this.valueSchema[this.mode];if(n<r.length-1){var o=r.splice(n+1,1);r.splice(n,0,o[0])}this.$meta.util.swipeoutClose(e.target)},onInputValueMode4:function(e){this.valueMode4=e,this.__onInputValueMode4Delay(e)},__onInputValueMode4Delay:n.n(r)().prototype.$meta.util.debounce((function(e){try{this.valueSchema[this.mode]=window.JSON5.parse(e)}catch(e){this.$view.toast.show({text:e.message})}}),1e3),renderMode_3_item:function(e,t){var n=this.$createElement,r=n("f7-icon",{attrs:{material:e.icon},slot:"media"}),o=n("div",{slot:"title",class:"title"},[n("div",[e.title])]);return n("eb-list-item",{class:"item",key:t,attrs:{swipeout:!this.readOnly}},[r,o,this.renderMode_3_itemContextMenu(e,t)])},renderMode_3_itemContextMenu_left:function(e,t){var n=this,r=this.$createElement,o=[];return o.push(r("div",{key:"moveUp",attrs:{color:"teal"},props:{onPerform:function(r){return n.onPerformMoveUpMode3(r,e,t)}}},[r("f7-icon",{slot:"media",attrs:{material:"arrow_upward"}}),this.$device.desktop&&r("div",{slot:"title"},[this.$text("Move Up")])])),o.push(r("div",{key:"moveDown",attrs:{color:"blue"},props:{onPerform:function(r){return n.onPerformMoveDownMode3(r,e,t)}}},[r("f7-icon",{slot:"media",attrs:{material:"arrow_downward"}}),this.$device.desktop&&r("div",{slot:"title"},[this.$text("Move Down")])])),r("div",{slot:"left"},[o])},renderMode_3_itemContextMenu_right:function(e,t){var n=this,r=this.$createElement,o=[];return o.push(r("div",{key:"remove",attrs:{color:"red"},props:{onPerform:function(r){return n.onPerformRemoveMode3(r,e,t)}}},[r("f7-icon",{slot:"media",attrs:{material:"delete"}}),this.$device.desktop&&r("div",{slot:"title"},[this.$text("Remove")])])),r("div",{slot:"right"},[o])},renderMode_3_itemContextMenu:function(e,t){var n=this.$createElement;return this.readOnly?null:n("eb-context-menu",[this.renderMode_3_itemContextMenu_left(e,t),this.renderMode_3_itemContextMenu_right(e,t)])},renderMode_3:function(){var e,t=this.$createElement;if(3!==this.valueMode)return null;this.readOnly||(e=t("f7-list-item",{attrs:{"group-title":!0}},[t("f7-list-item",{attrs:{smartSelect:!0,title:this.$text("Select Fields"),smartSelectParams:{openIn:"page",closeOnSelect:!1,formatValueText:function(){return null}}}},[t("eb-select",{attrs:{name:"mode3Select",value:this.mode3SelectValue,multiple:!0,options:this.mode3SelectOptions},on:{input:this.onInputMode3},props:{onGetDisplays:function(){return null}}})])]));for(var n=[],r=0;r<this.mode3Items.length;r++)n.push(this.renderMode_3_item(this.mode3Items[r],r));return t("f7-list-group",[e,n])},renderMode_4:function(){var e=this.$createElement;return 4!==this.valueMode?null:e("f7-list-group",[e("f7-list-item",[e("eb-input",{slot:"inner",attrs:{type:"textarea",readonly:this.readOnly,resizable:!0,value:this.valueMode4},style:{width:"100%"},class:"json-textarea",on:{input:this.onInputValueMode4}})])])}},render:function(){var e=arguments[0];return e("eb-list",{attrs:{form:!0,"inline-labels":!0,"no-hairlines-md":!0}},[e("f7-list-group",[e("f7-list-item",{attrs:{smartSelect:!this.readOnly,title:this.$text("Mode"),smartSelectParams:{openIn:"sheet",closeOnSelect:!0}}},[e("eb-select",{attrs:{readOnly:this.readOnly,name:"mode",value:this.valueMode,multiple:!1,options:this.valueModes},on:{input:this.onInputMode}})])]),this.renderMode_3(),this.renderMode_4()])}}},37:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(5);const o={props:{readOnly:{type:Boolean},assignees:{type:Object}},data:function(){return{}},methods:{onPerformAdd:function(){if(!this.assignees.vars.find((function(e){return"flowUser"===e.name}))){var e={name:"flowUser",title:"FlowInitiator",titleLocale:this.$text("FlowInitiator")};this.assignees.vars.push(e)}},onPerformRemove:function(e,t,n){this.assignees.vars.splice(n,1),this.$meta.util.swipeoutClose(e.target)},_renderAssignee:function(e,t){var n=this.$createElement,r=n("div",{slot:"title",class:"title"},[n("div",[e.titleLocale])]);return n("eb-list-item",{class:"item",key:t,attrs:{swipeout:!this.readOnly}},[r,this._renderAssigneeContextMenu(e,t)])},_renderAssigneeContextMenu:function(e,t){var n=this,r=this.$createElement;if(this.readOnly)return null;var o=[];o.push(r("div",{key:"remove",attrs:{color:"red"},props:{onPerform:function(r){return n.onPerformRemove(r,e,t)}}},[r("f7-icon",{slot:"media",attrs:{material:"delete"}}),this.$device.desktop&&r("div",{slot:"title"},[this.$text("Remove")])]));var a=r("div",{slot:"right"},[o]);return r("eb-context-menu",[a])},renderAssignees:function(){for(var e=[],t=this.assignees.vars,n=0;n<t.length;n++)e.push(this._renderAssignee(t[n],n));return e}},render:function(){var e,t=arguments[0];return this.readOnly||(e=t("eb-link",{attrs:{iconMaterial:"add"},props:{onPerform:this.onPerformAdd}})),t("f7-list-group",[t("f7-list-item",{attrs:{"group-title":!0}},[t("div",{class:"display-flex justify-content-space-between"},[t("div",[this.$text("Variables")]),e])]),this.renderAssignees()])}};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const i={props:{readOnly:{type:Boolean},assignees:{type:Object},host:{type:Object}},data:function(){return{}},methods:{onPerformAdd:function(){var e=this;this.$view.navigate("/a/baseadmin/role/select",{target:"_self",context:{params:{roleIdStart:null,multiple:!0,onFetchChildren:function(t){var n=t.roleId;return e.$api.post("/a/flowchart/flowDef/roleChildren",{host:e.host,params:{roleId:n,page:{size:0}}})}},callback:function(t,n){if(200===t&&n){var r,o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}(n.map((function(e){return e.data})));try{var i=function(){var t=r.value;e.assignees.roles.find((function(e){return e.id===t.id}))||e.assignees.roles.push(t)};for(o.s();!(r=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}}}}})},onPerformRemove:function(e,t,n){this.assignees.roles.splice(n,1),this.$meta.util.swipeoutClose(e.target)},_renderAssignee:function(e,t){var n=this.$createElement,r=n("div",{slot:"title",class:"title"},[n("div",[e.roleName])]);return n("eb-list-item",{class:"item",key:t,attrs:{swipeout:!this.readOnly}},[r,this._renderAssigneeContextMenu(e,t)])},_renderAssigneeContextMenu:function(e,t){var n=this,r=this.$createElement;if(this.readOnly)return null;var o=[];o.push(r("div",{key:"remove",attrs:{color:"red"},props:{onPerform:function(r){return n.onPerformRemove(r,e,t)}}},[r("f7-icon",{slot:"media",attrs:{material:"delete"}}),this.$device.desktop&&r("div",{slot:"title"},[this.$text("Remove")])]));var a=r("div",{slot:"right"},[o]);return r("eb-context-menu",[a])},renderAssignees:function(){for(var e=[],t=this.assignees.roles,n=0;n<t.length;n++)e.push(this._renderAssignee(t[n],n));return e}},render:function(){var e,t=arguments[0];return this.readOnly||(e=t("eb-link",{attrs:{iconMaterial:"add"},props:{onPerform:this.onPerformAdd}})),t("f7-list-group",[t("f7-list-item",{attrs:{"group-title":!0}},[t("div",{class:"display-flex justify-content-space-between"},[t("div",[this.$text("Roles")]),e])]),this.renderAssignees()])}},s={props:{readOnly:{type:Boolean},assignees:{type:Object},host:{type:Object}},data:function(){return{}},methods:{onPerformAdd:function(){var e=this;this.$view.navigate("/a/baseadmin/user/select",{target:"_self",context:{params:{onFetchUsers:function(t){var n=t.query,r=t.page;return e.$api.post("/a/flowchart/flowDef/userSelect",{host:e.host,params:{query:n,page:r}})}},callback:function(t,n){200===t&&(e.assignees.users.find((function(e){return e.id===n.id}))||e.assignees.users.push(n))}}})},onPerformRemove:function(e,t,n){this.assignees.users.splice(n,1),this.$meta.util.swipeoutClose(e.target)},getItemMedia:function(e){var t=e.avatar||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(t,32)},_renderAssignee:function(e,t){var n,r,o=this.$createElement,a=o("div",{slot:"media"},[o("img",{class:"avatar avatar32",attrs:{src:this.getItemMedia(e)}})]),i=o("div",{slot:"title",class:"title"},[o("div",[e.userName])]);e.realName&&e.realName!==e.userName&&(n=o("f7-badge",[e.realName])),e.mobile&&(r=o("f7-badge",[e.mobile]));var s=o("div",{slot:"after"},[n,r]);return o("eb-list-item",{class:"item",key:t,attrs:{swipeout:!this.readOnly}},[a,i,s,this._renderAssigneeContextMenu(e,t)])},_renderAssigneeContextMenu:function(e,t){var n=this,r=this.$createElement;if(this.readOnly)return null;var o=[];o.push(r("div",{key:"remove",attrs:{color:"red"},props:{onPerform:function(r){return n.onPerformRemove(r,e,t)}}},[r("f7-icon",{slot:"media",attrs:{material:"delete"}}),this.$device.desktop&&r("div",{slot:"title"},[this.$text("Remove")])]));var a=r("div",{slot:"right"},[o]);return r("eb-context-menu",[a])},renderAssignees:function(){for(var e=[],t=this.assignees.users,n=0;n<t.length;n++)e.push(this._renderAssignee(t[n],n));return e}},render:function(){var e,t=arguments[0];return this.readOnly||(e=t("eb-link",{attrs:{iconMaterial:"add"},props:{onPerform:this.onPerformAdd}})),t("f7-list-group",[t("f7-list-item",{attrs:{"group-title":!0}},[t("div",{class:"display-flex justify-content-space-between"},[t("div",[this.$text("Users")]),e])]),this.renderAssignees()])}};function c(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,s,"next",e)}function s(e){c(a,r,o,i,s,"throw",e)}i(void 0)}))}}const l={mixins:[n.n(r)().prototype.$meta.module.get("a-components").options.mixins.ebPageContext],components:{assigneesVars:o,assigneesRoles:i,assigneesUsers:s},data:function(){return{flowDefId:parseInt(this.$f7route.query.flowDefId),nodeId:this.$f7route.query.nodeId,assignees:null}},computed:{ready:function(){return!!this.assignees},context:function(){return this.contextParams.context},readOnly:function(){return this.contextParams.readOnly},value:function(){return this.contextParams.value},host:function(){return{flowDefId:this.flowDefId,nodeDefId:this.nodeId}}},created:function(){this.__load()},methods:{__load:function(){var e=this;return u(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.__normalizeAssignees();case 2:case"end":return t.stop()}}),t)})))()},__normalizeAssignees:function(){var e=this;return u(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.post("/a/flowchart/flowDef/normalizeAssignees",{host:e.host,assignees:e.value});case 2:e.assignees=t.sent;case 3:case"end":return t.stop()}}),t)})))()},__getPageTitle:function(){return this.$text("Assignees")},onPerformDone:function(){var e={};this.assignees.users.length>0&&(e.users=this.assignees.users.map((function(e){return{id:e.id,userName:e.userName}}))),this.assignees.roles.length>0&&(e.roles=this.assignees.roles.map((function(e){return{id:e.id,roleName:e.roleName}}))),this.assignees.vars.length>0&&(e.vars=this.assignees.vars.map((function(e){return e.name}))),this.contextCallback(200,e),this.$f7router.back()},renderAssignees:function(){var e=this.$createElement;if(this.ready)return e("eb-list",{attrs:{form:!0,"inline-labels":!0,"no-hairlines-md":!0}},[e("assignees-vars",{attrs:{readOnly:this.readOnly,assignees:this.assignees}}),e("assignees-roles",{attrs:{readOnly:this.readOnly,assignees:this.assignees,host:this.host}}),e("assignees-users",{attrs:{readOnly:this.readOnly,assignees:this.assignees,host:this.host}})])}},render:function(){var e,t=arguments[0];return this.readOnly||(e=t("eb-link",{attrs:{iconMaterial:"done"},props:{onPerform:this.onPerformDone}})),t("eb-page",[t("eb-navbar",{attrs:{title:this.__getPageTitle(),"eb-back-link":"Back"}},[t("f7-nav-right",[e])]),this.renderAssignees()])}}},887:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(5);function o(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}var i=n.n(r)().prototype.$meta.module.get("a-components").options.mixins.ebPageContext,s={type:"object",properties:{__groupBasic:{ebType:"group-flatten",ebTitle:"Basic"},id:{type:"string",ebType:"text",ebTitle:"ID",ebReadOnly:!0},name:{type:"string",ebType:"text",ebTitle:"Name",notEmpty:!0},type:{type:"string",ebType:"text",ebTitle:"Type",ebReadOnly:!0}}},c={type:"object",properties:{__groupBasic:{ebType:"group-flatten",ebTitle:"Basic"},id:{type:"string",ebType:"text",ebTitle:"ID",ebReadOnly:!0},name:{type:"string",ebType:"text",ebTitle:"Name",notEmpty:!0},source:{type:"string",ebType:"component",ebTitle:"Source",ebRender:{module:"a-flowchart",name:"renderSelectNode"},notEmpty:!0},target:{type:"string",ebType:"component",ebTitle:"Target",ebRender:{module:"a-flowchart",name:"renderSelectNode"},notEmpty:!0}}};const u={mixins:[i],data:function(){return{flowDefId:parseInt(this.$f7route.query.flowDefId),type:this.$f7route.query.type,id:this.$f7route.query.id,nodeBases:null,edgeBases:null,data:null,schema:null}},computed:{ready:function(){return this.nodeBases&&this.edgeBases&&this.data&&this.schema},diagram:function(){return this.contextParams.diagram},readOnly:function(){return this.diagram.readOnly}},created:function(){this.__load()},mounted:function(){this.diagram.$on("diagram:destroy",this.onDiagramDestroy)},beforeDestroy:function(){this.diagram.$off("diagram:destroy",this.onDiagramDestroy),this._unwatch&&(this._unwatch(),this._unwatch=null)},methods:{__load:function(){var e=this;return a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$local.dispatch("getNodeBases");case 2:return e.nodeBases=t.sent,t.next=5,e.$local.dispatch("getEdgeBases");case 5:return e.edgeBases=t.sent,e.__initData(),t.next=9,e.__initSchema();case 9:case"end":return t.stop()}}),t)})))()},__initData:function(){var e=this,t="node"===this.type?this.diagram.__findNode(this.id):this.diagram.__findEdge(this.id),n=this.$meta.util.extend({},"node"===this.type?this.$config.schema.default.base.node:this.$config.schema.default.base.edge),r=("node"===this.type?this.nodeBases[t.type]:this.edgeBases.sequence).options.default;r&&(n.options=r),this.data=this.$meta.util.extend({},n,t),this._unwatch=this.$watch("data",(function(){e.__dataChange()}),{deep:!0})},__initSchema:function(){var e=this;return a(regeneratorRuntime.mark((function t(){var n,r,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="node"===e.type?e.nodeBases[e.data.type]:e.edgeBases.sequence,r="node"===e.type?s:c,!n.validator){t.next=6;break}return t.next=5,e.$api.post("/a/validation/validation/schema",{module:n.validator.module,validator:n.validator.validator,schema:null});case 5:o=t.sent;case 6:o&&(a={type:"object",properties:{options:{type:"object",ebType:"group",ebTitle:"Options",properties:o.schema.properties}}},r=e.$meta.util.extend({},r,a)),e.schema={module:n.validator?n.validator.module:"a-flowchart",validator:n.validator?n.validator.validator:null,schema:r};case 8:case"end":return t.stop()}}),t)})))()},onDiagramDestroy:function(){this.$view.close()},onPerformDelete:function(){var e=this;return a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$view.dialog.confirm();case 2:"node"===e.type?e.diagram.deleteNode(e.id):e.diagram.deleteEdge(e.id),e.$view.close();case 4:case"end":return t.stop()}}),t)})))()},__getPageTitle:function(){return this.data?"".concat(this.$text("Properties"),": ").concat(this.data.nameLocale||this.data.name||this.data.id):this.$text("Properties")},__dataChange:function(){this.diagram.__dataChange(this.type,this.id,this.data)},__getHost:function(){return{flowDefId:this.flowDefId,diagram:this.diagram}},renderList:function(){var e=this,t=this.$createElement;if(this.ready){var n={container:this},r={schema:this.schema,properties:{type:{ebPatch:{getValue:function(t){return("node"===e.type?e.nodeBases[t]:e.edgeBases.sequence).titleLocale}}}}};return t("eb-validate",{ref:"validate",attrs:{readOnly:this.readOnly,auto:!0,data:this.data,meta:r,host:n}})}}},render:function(){var e,t=arguments[0];return this.readOnly||(e=t("eb-link",{attrs:{iconMaterial:"delete"},props:{onPerform:this.onPerformDelete}})),t("eb-page",[t("eb-navbar",{attrs:{title:this.__getPageTitle(),"eb-back-link":"Back"}},[t("f7-nav-right",[e])]),this.renderList()])}}},891:(e,t,n)=>{var r=n(233),o=n(361)(r);o.push([e.id,".diagram-actions {\n  position: fixed;\n  bottom: 6px;\n  right: 6px;\n  z-index: 200;\n}\n.diagram-actions .link {\n  color: var(--f7-grid-resize-handler-bg-color);\n  margin-left: 4px;\n}\n.media-node-base-icon {\n  height: 24px;\n}\n.eb-flowchart-node-icons {\n  display: flex;\n  padding: 2px;\n}\n.eb-flowchart-node-icons img {\n  height: 24px;\n  width: 24px;\n  border-radius: 6px;\n  border: 1px solid transparent;\n}\n.eb-flowchart-node-label {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  word-break: break-word;\n  padding: 6px;\n}\n.eb-flowchart-node-label span {\n  text-align: center;\n}\n","",{version:3,sources:["webpack://./front/src/assets/css/module.less"],names:[],mappings:"AAAA;EACE,eAAA;EACA,WAAA;EACA,UAAA;EACA,YAAA;AACF;AALA;EAOI,6CAAA;EACA,gBAAA;AACJ;AAGA;EACE,YAAA;AADF;AAIA;EACE,aAAA;EACA,YAAA;AAFF;AAAA;EAKI,YAAA;EACA,WAAA;EACA,kBAAA;EACA,6BAAA;AAFJ;AAMA;EACE,aAAA;EACA,uBAAA;EACA,mBAAA;EACA,sBAAA;EACA,YAAA;AAJF;AADA;EAQI,kBAAA;AAJJ",sourcesContent:[".diagram-actions {\n  position: fixed;\n  bottom: 6px;\n  right: 6px;\n  z-index: 200;\n\n  .link {\n    color: var(--f7-grid-resize-handler-bg-color);\n    margin-left: 4px;\n  }\n}\n\n.media-node-base-icon {\n  height: 24px;\n}\n\n.eb-flowchart-node-icons {\n  display: flex;\n  padding: 2px;\n\n  img {\n    height: 24px;\n    width: 24px;\n    border-radius: 6px;\n    border: 1px solid transparent;\n  }\n}\n\n.eb-flowchart-node-label {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  word-break: break-word;\n  padding: 6px;\n\n  span {\n    text-align: center;\n  }\n}\n"],sourceRoot:""}]),e.exports=o},361:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(o[i]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},233:e=>{"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=function(e){var n,r,o=(r=4,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}}(n,r)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[1],i=o[3];if("function"==typeof btoa){var s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),u="/*# ".concat(c," */"),l=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[a].concat(l).concat([u]).join("\n")}return[a].join("\n")}},674:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(5),o=n.n(r),a=n(623),i=n(601),s=n(250);const c={meta:{size:"large"},mixins:[o().prototype.$meta.module.get("a-components").options.mixins.ebPageContext],components:{contentEditDiagram:a.Z,contentEditSource:i.Z,contentEditListener:s.Z},data:function(){return{dirty:!1,contentProcess:null,contentProcessStr:null,contentListener:null,tabId:{diagram:o().prototype.$meta.util.nextId("tab"),source:o().prototype.$meta.util.nextId("tab"),listener:o().prototype.$meta.util.nextId("tab")},tabName:"diagram"}},computed:{title:function(){return"".concat(this.dirty?"* ":"").concat(this.flowDef.atomName)},readOnly:function(){return this.contextParams.readOnly},flowDef:function(){return this.contextParams.item},flowDefId:function(){return this.flowDef.atomId},contentObj:function(){return this.flowDef.content?JSON.parse(this.flowDef.content):{}}},created:function(){var e=this.contentObj;this.contentProcess=e.process||this.$config.flowDef.default.process,this.contentProcessStr=window.JSON5.stringify(this.contentProcess,null,2),this.contentListener=e.listener||this.$config.flowDef.default.listener},methods:{onContentChange:function(e){if(!this.readOnly){var t={};"process"===e.type?(this.contentProcess=e.value,t.process=e.value,e.valueStr?this.contentProcessStr=e.valueStr:this.contentProcessStr=window.JSON5.stringify(this.contentProcess,null,2)):"listener"===e.type&&(this.contentListener=e.value,t.listener=e.value);var n=JSON.stringify(this.$meta.util.extend({},this.contentObj,t));this.dirty=!0,this.contextCallback(200,{content:n})}},onSave:function(){var e=this;this.onPerformSave().then((function(t){e.$view.toast.show({text:t})})).catch((function(t){e.$view.toast.show({text:t.message})}))},onPerformSave:function(){var e=this;return this.contextParams.ctx.save().then((function(){return e.dirty=!1,e.$text("Saved")}))}}},u=(0,n(792).Z)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("eb-page",{attrs:{"page-content":!1,tabs:"","with-subnavbar":""}},[n("eb-navbar",{attrs:{title:e.title,"eb-back-link":"Back"}},[n("f7-nav-right",[e.readOnly?e._e():n("eb-link",{attrs:{iconMaterial:"save",onPerform:e.onPerformSave}})],1),e._v(" "),n("f7-subnavbar",[n("f7-toolbar",{attrs:{top:"",tabbar:""}},[n("eb-link",{attrs:{"tab-link":"#"+e.tabId.diagram,tabLinkActive:"diagram"===e.tabName,text:e.$text("flowDefDiagramTitle")}}),e._v(" "),n("eb-link",{attrs:{"tab-link":"#"+e.tabId.source,tabLinkActive:"source"===e.tabName,text:e.$text("flowDefSourceTitle")}}),e._v(" "),n("eb-link",{attrs:{"tab-link":"#"+e.tabId.listener,tabLinkActive:"listener"===e.tabName,text:e.$text("flowDefListenerTitle")}})],1)],1)],1),e._v(" "),n("f7-tabs",{ref:"tabs"},[n("eb-tab-page-content",{attrs:{id:e.tabId.diagram,ptr:!1,infinite:!1,tabActive:"diagram"===e.tabName,"data-ref":"diagram"},on:{"tab:show":function(t){e.tabName="diagram"}}},[n("content-edit-diagram",{attrs:{readOnly:e.readOnly,tabActive:"diagram"===e.tabName,flowDefId:e.flowDefId,contentProcessStr:e.contentProcessStr},on:{contentChange:e.onContentChange}})],1),e._v(" "),n("eb-tab-page-content",{attrs:{id:e.tabId.source,ptr:!1,infinite:!1,tabActive:"source"===e.tabName,"data-ref":"source"},on:{"tab:show":function(t){e.tabName="source"}}},[n("content-edit-source",{attrs:{readOnly:e.readOnly,contentProcessStr:e.contentProcessStr},on:{contentChange:e.onContentChange}})],1),e._v(" "),n("eb-tab-page-content",{attrs:{id:e.tabId.listener,ptr:!1,infinite:!1,tabActive:"listener"===e.tabName,"data-ref":"listener"},on:{"tab:show":function(t){e.tabName="listener"}}},[n("content-edit-listener",{attrs:{readOnly:e.readOnly,contentListener:e.contentListener},on:{contentChange:e.onContentChange}})],1)],1)],1)}),[],!1,null,null,null).exports},676:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(5),o=n.n(r),a=n(623);const i={mixins:[o().prototype.$meta.module.get("a-components").options.mixins.ebPageContext],components:{contentEditDiagram:a.Z},data:function(){return{}},computed:{title:function(){return this.$text("Flow Chart")},contentProcess:function(){return this.contextParams.contentProcess},contentProcessStr:function(){return window.JSON5.stringify(this.contentProcess,null,2)},flowNodeDefIds:function(){return this.contextParams.flowNodeDefIds}},created:function(){},methods:{}},s=(0,n(792).Z)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("eb-page",[n("eb-navbar",{attrs:{title:e.title,"eb-back-link":"Back"}}),e._v(" "),n("content-edit-diagram",{attrs:{viewOnly:!0,readOnly:!0,tabActive:!0,contentProcessStr:e.contentProcessStr,flowNodeDefIds:e.flowNodeDefIds}})],1)}),[],!1,null,null,null).exports},353:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(5);function o(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const u={mixins:[n.n(r)().prototype.$meta.module.get("a-components").options.mixins.ebPageContext],data:function(){return{nodeBases:null}},computed:{ready:function(){return this.nodeBases},diagram:function(){return this.contextParams.diagram},nodeBasesGroups:function(){var e,t=this.$config.flowDef.groups,n=this.$meta.util.extend([],t),r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}(n);try{for(r.s();!(e=r.n()).done;){var o=e.value;for(var a in o.titleLocale=this.$text(o.title),o.items=[],this.nodeBases){var s=this.nodeBases[a];s.group===o.name&&o.items.push(i({type:a},s))}}}catch(e){r.e(e)}finally{r.f()}return n}},created:function(){this.__load()},mounted:function(){this.diagram.$on("diagram:destroy",this.onDiagramDestroy)},beforeDestroy:function(){this.diagram.$off("diagram:destroy",this.onDiagramDestroy)},methods:{__load:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$local.dispatch("getNodeBases");case 2:t.nodeBases=e.sent;case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))})()},onDiagramDestroy:function(){this.$view.close()},getNodeMedia:function(e){return this.$meta.util.combineFetchStaticPath(e.icon)},onPerformNode:function(e,t){this.diagram.addNode(t),this.$view.inPanel()||this.$f7router.back()}}},l=(0,n(792).Z)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("eb-page",[n("eb-navbar",{attrs:{title:e.$text("Flow Chart"),"eb-back-link":"Back"}}),e._v(" "),e.ready?n("f7-list",e._l(e.nodeBasesGroups,(function(t){return n("f7-list-group",{key:t.name},[n("f7-list-item",{attrs:{"group-title":"",title:t.titleLocale}}),e._v(" "),e._l(t.items,(function(t){return n("eb-list-item",{key:t.type,attrs:{title:t.titleLocale,link:"#",context:t,onPerform:e.onPerformNode}},[n("div",{attrs:{slot:"media"},slot:"media"},[n("img",{staticClass:"media-node-base-icon",attrs:{src:e.getNodeMedia(t)}})])])}))],2)})),1):e._e()],1)}),[],!1,null,null,null).exports},481:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(5),o=n.n(r),a=n(770);const i={mixins:[o().prototype.$meta.module.get("a-components").options.mixins.ebPageContext],components:{schemaFieldsTab:a.Z},data:function(){return{flowDefId:parseInt(this.$f7route.query.flowDefId),nodeId:this.$f7route.query.nodeId,valueSchema:null,tabId:{read:o().prototype.$meta.util.nextId("tab"),write:o().prototype.$meta.util.nextId("tab")},tabName:"read"}},computed:{title:function(){return this.$text("Field Permissions")},context:function(){return this.contextParams.context},readOnly:function(){return this.contextParams.readOnly},value:function(){return this.contextParams.value},schemaReference:function(){return this.contextParams.schemaReference}},created:function(){this.valueSchema=this.value},methods:{onPerformDone:function(){this.contextCallback(200,this.valueSchema),this.$f7router.back()},onPerformInfo:function(){this.$view.navigate("/a/basefront/json/editor?t=".concat(Date.now()),{target:"_self",context:{params:{value:this.schemaReference.schema,title:this.$text("ReferenceForHelp"),readOnly:!0}}})}}},s=(0,n(792).Z)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("eb-page",{attrs:{"page-content":!1,tabs:"","with-subnavbar":""}},[n("eb-navbar",{attrs:{title:e.title,"eb-back-link":"Back"}},[n("f7-nav-right",[e.readOnly?e._e():n("eb-link",{attrs:{iconMaterial:"done",onPerform:e.onPerformDone}}),e._v(" "),e.schemaReference?n("eb-link",{attrs:{iconMaterial:"info",onPerform:e.onPerformInfo}}):e._e()],1),e._v(" "),n("f7-subnavbar",[n("f7-toolbar",{attrs:{top:"",tabbar:""}},[n("eb-link",{attrs:{"tab-link":"#"+e.tabId.read,tabLinkActive:"read"===e.tabName,text:e.$text("Read")}}),e._v(" "),n("eb-link",{attrs:{"tab-link":"#"+e.tabId.write,tabLinkActive:"write"===e.tabName,text:e.$text("Write")}})],1)],1)],1),e._v(" "),n("f7-tabs",{ref:"tabs"},[n("eb-tab-page-content",{attrs:{id:e.tabId.read,ptr:!1,infinite:!1,tabActive:"read"===e.tabName,"data-ref":"read"},on:{"tab:show":function(t){e.tabName="read"}}},[n("schema-fields-tab",{attrs:{context:e.context,readOnly:e.readOnly,mode:"read",valueSchema:e.valueSchema,schemaReference:e.schemaReference}})],1),e._v(" "),n("eb-tab-page-content",{attrs:{id:e.tabId.write,ptr:!1,infinite:!1,tabActive:"write"===e.tabName,"data-ref":"write"},on:{"tab:show":function(t){e.tabName="write"}}},[n("schema-fields-tab",{attrs:{context:e.context,readOnly:e.readOnly,mode:"write",valueSchema:e.valueSchema,schemaReference:e.schemaReference}})],1)],1)],1)}),[],!1,null,null,null).exports},792:(e,t,n)=>{"use strict";function r(e,t,n,r,o,a,i,s){var c,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),a&&(u._scopeId="data-v-"+a),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=c):o&&(c=s?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,{Z:()=>r})},824:(e,t,n)=>{var r=n(891);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals),(0,n(159).Z)("0f15f724",r,!0,{})},159:(e,t,n)=>{"use strict";function r(e,t){for(var n=[],r={},o=0;o<t.length;o++){var a=t[o],i=a[0],s={id:e+":"+o,css:a[1],media:a[2],sourceMap:a[3]};r[i]?r[i].parts.push(s):n.push(r[i]={id:i,parts:[s]})}return n}n.d(t,{Z:()=>p});var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},i=o&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,u=!1,l=function(){},d=null,f="data-vue-ssr-id",h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(e,t,n,o){u=n,d=o||{};var i=r(e,t);return m(i),function(t){for(var n=[],o=0;o<i.length;o++){var s=i[o];(c=a[s.id]).refs--,n.push(c)}for(t?m(i=r(e,t)):i=[],o=0;o<n.length;o++){var c;if(0===(c=n[o]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete a[c.id]}}}}function m(e){for(var t=0;t<e.length;t++){var n=e[t],r=a[n.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(g(n.parts[o]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var i=[];for(o=0;o<n.parts.length;o++)i.push(g(n.parts[o]));a[n.id]={id:n.id,refs:1,parts:i}}}}function v(){var e=document.createElement("style");return e.type="text/css",i.appendChild(e),e}function g(e){var t,n,r=document.querySelector("style["+f+'~="'+e.id+'"]');if(r){if(u)return l;r.parentNode.removeChild(r)}if(h){var o=c++;r=s||(s=v()),t=w.bind(null,r,o,!1),n=w.bind(null,r,o,!0)}else r=v(),t=x.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var y,b=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function w(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=b(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function x(e,t){var n=t.css,r=t.media,o=t.sourceMap;if(r&&e.setAttribute("media",r),d.ssrId&&e.setAttribute(f,t.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},990:(e,t,n)=>{var r={"./flowDef/assigneesEdit.jsx":37,"./flowDef/nodeProperties.jsx":887};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=990},142:(e,t,n)=>{var r={"./flowDef/contentEdit.vue":674,"./flowDef/contentProcessView.vue":676,"./flowDef/nodes.vue":353,"./flowDef/schemaFields.vue":481};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=142},5:e=>{"use strict";e.exports=window.Vue}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";var e;n.r(r),n.d(r,{default:()=>t}),n(824);const t={install:function(t,r){return e?console.error("already installed."):(e=t,r({routes:n(644).Z,store:n(81).Z(e),config:n(788).Z,locales:n(137).Z,components:n(530).Z}))}}})(),window["a-flowchart"]=r})();
//# sourceMappingURL=front.js.map